{"version":3,"sources":["redux/dialogs-reducer.ts","assets/images/user.png","api/api.ts","components/Users/Users.module.css","components/Navbar/Navbar.module.css","utils/object-helpers.js","redux/users-reducer.ts","redux/auth-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/Navbar/Navbar.jsx","components/Music/Music.jsx","components/News/News.jsx","components/common/Paginator/Paginator.tsx","components/Users/User.jsx","components/Users/Users.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","logo.jpg","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","App.js","index.js","components/common/FormsControls/FormsControls.module.css","assets/images/preloader.gif","components/common/Preloader/Preloader.jsx","components/Header/Header.module.css","components/common/FormsControls/FormsControls.tsx","utils/validators/validators.ts","components/common/Paginator/Paginator.module.css","redux/profile-reducer.ts"],"names":["SEND_MESSAGE","initialState","messages","id","message","dialogs","name","sendMessageCreator","newMessageBody","type","dialogsReducer","state","action","newMessage","ResultCodesEnum","instance","axios","create","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","userId","post","unfollow","delete","getProfile","profileAPI","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","module","exports","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","toggleIsFetching","toggleFollowingInProgress","usersReducer","followed","count","filter","SET_USER_DATA","GET_CAPTCHA_URL_SUCCESS","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","dispatch","a","resultCode","Success","url","authReducer","SET_INITIALIZED_SUCCESS","initialized","appReducer","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","usersPage","auth","app","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Navbar","className","c","nav","item","to","activeClassName","active","Music","News","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","onClick","p","page","selectedPage","User","user","src","photos","small","userPhoto","alt","disabled","some","Users","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","pageNumber","props","this","Preloader","Component","connect","getState","totalCount","Header","s","header","loginBlock","style","display","alignItems","btn","value","HeaderContainer","LoginReduxForm","reduxForm","handleSubmit","error","onSubmit","Field","placeholder","component","Input","validate","required","formSummaryError","CaptchaIsRequired","length","stopSubmit","_error","ProfileContainer","lazy","DialogsContainer","App","initializeApp","fallback","path","render","exact","LoginPage","React","withRouter","promise1","Promise","all","ReactDOM","document","getElementById","preloader","FormControl","hasError","meta","touched","formControl","children","Textarea","input","restProps","maxLengthCreator","maxLength","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","posts","likeCount","newPostText","addPostActionCreator","setStatus","getUserProfile","file","socialNetworkName","slice","toLowerCase","split","includes","reject","newPost","postId"],"mappings":"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","file":"static/js/main.a4e148e2.chunk.js","sourcesContent":["const SEND_MESSAGE = 'dialogs/SEND-MESSAGE';\r\n\r\n// export type InitialStateType = {\r\n//     messages: <Array>[string]\r\n//     dialogs: string | null\r\n// }\r\n\r\ntype DialogType = {\r\n    id: number\r\n    name: string\r\n}\r\n\r\ntype MessageType = {\r\n    id: number\r\n    message: string\r\n}\r\n\r\nconst initialState = {\r\n    messages: [{id: 1, message: \"Hi how are you?\"}, {id: 2, message: \"What did you do yesterday?\"}, {id: 3, message: \"Yes, sure\"}] as Array<MessageType>,\r\n    dialogs: [{id: 1, name: \"Dima\"}, {id: 2, name: \"Sveta\"}, {id: 3, name: \"Vika\"}, {id: 4, name: \"Masha\"}] as Array<DialogType>\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst dialogsReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            const newMessage = { id: 4, message: action.newMessageBody };\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, newMessage]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = SendMessageCreatorActionType;\r\n\r\nexport type SendMessageCreatorActionType = {\r\n    type: typeof SEND_MESSAGE\r\n    newMessageBody: string\r\n}\r\n\r\nexport const sendMessageCreator = ( newMessageBody: string ): SendMessageCreatorActionType => {\r\n    return {\r\n        type: SEND_MESSAGE, newMessageBody\r\n    }\r\n}\r\n\r\nexport default dialogsReducer;\r\n","export default __webpack_public_path__ + \"static/media/user.43e64566.png\";","import axios from \"axios\";\r\nimport {ProfileType} from \"../types/types\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"97f1d028-7518-43ef-85bd-dd2bcb1ec8e1\"\r\n    }\r\n});\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance\r\n            .get(`users/?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    follow(userId: number) {\r\n        return instance\r\n            .post(`follow/${userId}`, { });\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance\r\n            .delete(`follow/${userId}`);\r\n    },\r\n    getProfile(userId: number) {\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n};\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance\r\n            .get(`profile/${userId}`);\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance\r\n            .get(`profile/status/${userId}`);\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance\r\n            .put('profile/status/', { status: status });\r\n    },\r\n    savePhoto(photoFile: any) {\r\n        const formData = new FormData();\r\n        formData.append('image ', photoFile);\r\n        return instance\r\n            .put('profile/photo/', formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n            })\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance\r\n            .put('profile/', profile);\r\n    }\r\n};\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1,\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\n// type dataType = {\r\n//     id: number\r\n//     email: string\r\n//     login: string\r\n// }\r\n\r\ntype MeResponseType = {\r\n    data: { // можно не описывать тип как выше, а сразу\r\n        id: number\r\n        email: string\r\n        login: string\r\n    }\r\n    resultCode: ResultCodesEnum\r\n    messages: Array<string>\r\n}\r\n\r\ntype LoginResponseType = {\r\n    data: {\r\n        userId: number\r\n    }\r\n    resultCode: ResultCodesEnum\r\n    messages: Array<string>\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance\r\n            .get<MeResponseType>('auth/me')\r\n            .then(response => response.data);\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance\r\n            .post<LoginResponseType>('auth/login', { email, password, rememberMe, captcha });\r\n    },\r\n    logout() {\r\n        return instance\r\n            .delete('auth/login');\r\n    }\r\n};\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance\r\n            .get('security/get-captcha-url');\r\n    }\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__3Tunq\",\"selectedPage\":\"Users_selectedPage__1dWid\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__25szF\",\"item\":\"Navbar_item__DmRP0\",\"active\":\"Navbar_active__1Vami\"};","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {   // нужно сделать копию ТОЛЬКО того объекта(юзера) который меняем\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps};\r\n        }\r\n        return u;\r\n    })\r\n}","import {usersAPI} from \"../api/api\";\r\nimport {updateObjectInArray} from \"../utils/object-helpers\";\r\nimport {UserType} from \"../types/types\";\r\nimport {Dispatch} from \"redux\";\r\nimport {AppStateType} from \"./redux-store\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\n\r\nconst FOLLOW = 'users/FOLLOW';\r\nconst UNFOLLOW = 'users/UNFOLLOW';\r\nconst SET_USERS = 'users/SET_USERS';\r\nconst SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'users/SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'users/TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'users/TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<number>  // когда идет подписка, сюда добавлять id пользователя\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst usersReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n            };\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n            };\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.users    // ...спред action.users, т.к. action.users-массив, склеиваем 2 массива в 1\r\n            };\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            };\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            };\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            };\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = FollowSuccessActionType\r\n    | UnfollowSuccessActionType\r\n    | SetUsersActionType\r\n    | SetCurrentPageActionType\r\n    | SetTotalUsersCountActionType\r\n    | ToggleIsFetchingActionType\r\n    | ToggleFollowingInProgressActionType;\r\n\r\ntype FollowSuccessActionType = {\r\n    type: typeof FOLLOW\r\n    userId: number\r\n}\r\n\r\nexport const followSuccess = ( userId: number ): FollowSuccessActionType => {\r\n    return {\r\n        type: FOLLOW, userId\r\n    }\r\n}\r\n\r\ntype UnfollowSuccessActionType = {\r\n    type: typeof UNFOLLOW\r\n    userId: number\r\n}\r\n\r\nexport const unfollowSuccess = ( userId: number ): UnfollowSuccessActionType => {\r\n    return {\r\n        type: UNFOLLOW, userId\r\n    }\r\n}\r\n\r\ntype SetUsersActionType = {\r\n    type: typeof SET_USERS\r\n    users: Array<UserType>\r\n}\r\n\r\nexport const setUsers = ( users: Array<UserType> ): SetUsersActionType => {\r\n    return {\r\n        type: SET_USERS, users\r\n    }\r\n}\r\n\r\ntype SetCurrentPageActionType = {\r\n    type: typeof SET_CURRENT_PAGE\r\n    currentPage: number\r\n}\r\n\r\nexport const setCurrentPage = ( currentPage: number ): SetCurrentPageActionType => {\r\n    return {\r\n        type: SET_CURRENT_PAGE, currentPage\r\n    }\r\n}\r\n\r\ntype SetTotalUsersCountActionType = {\r\n    type: typeof SET_TOTAL_USERS_COUNT\r\n    count: number\r\n}\r\n\r\nexport const setTotalUsersCount = ( totalUsersCount: number ): SetTotalUsersCountActionType => {\r\n    return {\r\n        type: SET_TOTAL_USERS_COUNT, count: totalUsersCount\r\n    }\r\n}\r\n\r\ntype ToggleIsFetchingActionType = {\r\n    type: typeof TOGGLE_IS_FETCHING\r\n    isFetching: boolean\r\n}\r\n\r\nexport const toggleIsFetching = ( isFetching: boolean ): ToggleIsFetchingActionType => {\r\n    return {\r\n        type: TOGGLE_IS_FETCHING, isFetching\r\n    }\r\n}\r\n\r\ntype ToggleFollowingInProgressActionType = {\r\n    type: typeof TOGGLE_IS_FOLLOWING_PROGRESS\r\n    isFetching: boolean\r\n    userId: number\r\n}\r\n\r\nexport const toggleFollowingInProgress = ( isFetching: boolean, userId: number ): ToggleFollowingInProgressActionType => {\r\n    return {\r\n        type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId\r\n    }\r\n}\r\n\r\nexport const requestUsers = ( page: number, pageSize: number ) => async (dispatch: Dispatch<ActionsType>, getState: () => AppStateType) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(setCurrentPage(page));\r\n\r\n    const response = await usersAPI.getUsers(page, pageSize);\r\n    dispatch(toggleIsFetching(false));\r\n    dispatch(setUsers(response.items));\r\n    dispatch(setTotalUsersCount(response.totalCount));\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsType>;\r\n\r\nexport const follow = ( userId: number ): ThunkType => async (dispatch) => {\r\n    dispatch(toggleFollowingInProgress(true, userId));\r\n\r\n    const response = await usersAPI.follow(userId);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(followSuccess(userId));\r\n    }\r\n    dispatch(toggleFollowingInProgress(false, userId));\r\n}\r\n\r\nexport const unfollow = ( userId: number ): ThunkType => async (dispatch) => {\r\n    dispatch(toggleFollowingInProgress(true, userId));\r\n\r\n    const response = await usersAPI.unfollow(userId);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(unfollowSuccess(userId));\r\n    }\r\n    dispatch(toggleFollowingInProgress(false, userId));\r\n}\r\n\r\nexport default usersReducer;\r\n","import {authAPI, ResultCodesEnum, securityAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppStateType} from \"./redux-store\"; // это actionCreator\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'auth/GET_CAPTCHA_URL_SUCCESS';\r\n\r\n// export type InitialStateType2 = {\r\n//     userId: number | null\r\n//     email: string | null\r\n//     login: string | null\r\n//     isAuth: boolean\r\n//     captchaUrl: string | null\r\n// }\r\n\r\nconst initialState = {\r\n    userId: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst authReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                captchaUrl: action.captchaUrl\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = SetAuthUserDataActionType | GetCaptchaUrlSuccessActionType;\r\n\r\ntype SetAuthUserDataActionPayloadType = {\r\n    userId: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isAuth: boolean\r\n}\r\n\r\ntype SetAuthUserDataActionType = {\r\n    type: typeof SET_USER_DATA\r\n    payload: SetAuthUserDataActionPayloadType\r\n}\r\n\r\nexport const setAuthUserData = (userId: number | null, email: string | null, login: string | null, isAuth: boolean ): SetAuthUserDataActionType => ({type: SET_USER_DATA, payload: { userId, email, login, isAuth }});\r\n\r\ntype GetCaptchaUrlSuccessActionType = {\r\n    type: typeof GET_CAPTCHA_URL_SUCCESS\r\n    captchaUrl: string\r\n}\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string): GetCaptchaUrlSuccessActionType => ({type: GET_CAPTCHA_URL_SUCCESS, captchaUrl});\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsType>;\r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.me();\r\n    if (response.resultCode === ResultCodesEnum.Success) {\r\n        const { id, email, login } = response.data;\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\n\r\nexport const login = ( email: string, password: string, rememberMe: boolean, captcha: any ): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.login(email, password, rememberMe, captcha);\r\n    if (response.data.resultCode === ResultCodesEnum.Success) {\r\n        await dispatch(getAuthUserData());\r\n    }\r\n    else {\r\n        if (response.data.resultCode === ResultCodesEnum.CaptchaIsRequired) {   // captcha\r\n            await dispatch(getCaptchaUrl());\r\n        }\r\n        const message = response.data.messages.length ? response.data.messages[0] : 'Some error';\r\n        // @ts-ignore\r\n        dispatch(stopSubmit('login', { _error: message }));  // 1)название формы 2)проблемные поля и текст ошибки(_error - общая. Можно по имени Field)\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    const response = await authAPI.logout();\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const response = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = response.data.url;\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\n\r\nexport default authReducer;","import {getAuthUserData} from \"./auth-reducer\";\r\n// import {ThunkType} from \"./users-reducer\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppStateType} from \"./redux-store\";    // это actionCreator\r\n\r\nconst SET_INITIALIZED_SUCCESS = 'app/SET-INITIALIZED-SUCCESS';\r\n\r\nexport type InitialStateType = {\r\n    initialized: boolean\r\n}\r\n\r\nconst initialState: InitialStateType = {\r\n    initialized: false\r\n}\r\n\r\nconst appReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InitializedSuccessActionType;\r\n\r\n// let a: 'yoyo'\r\n// a = 'yoyo'\r\n//a = 'yoyo2' // ошибка\r\n\r\nexport type InitializedSuccessActionType = {\r\n    type: typeof SET_INITIALIZED_SUCCESS    // тип равный значению константы\r\n}\r\n\r\nexport const initializedSuccess = (): InitializedSuccessActionType => ({type: SET_INITIALIZED_SUCCESS});\r\n\r\nexport type ThunkType = ThunkAction<void, AppStateType, unknown, ActionsType>;\r\n\r\nexport const initializeApp = (): ThunkType => (dispatch) => {\r\n        const promise1 = dispatch(getAuthUserData());\r\n        //dispatch(something)\r\n        Promise.all([promise1])\r\n            .then(() => {\r\n                dispatch(initializedSuccess());\r\n            })\r\n\r\n}\r\n\r\nexport default appReducer;\r\n","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";  // своё название любое\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport authReducer from \"./auth-reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    form: formReducer   // Обязательно должно быть именно form\r\n})\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\n// let state: AppStateType;\r\n// state.dialogsPage   Можем теперь достать часть стейта используя ts\r\n\r\n// redux devtools installed\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport c from \"./Navbar.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={c.nav}>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/profile\" activeClassName={c.active}>Profile</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={c.active}>Messages</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/users\" activeClassName={c.active}>Users</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/news\" activeClassName={c.active}>News</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/music\" activeClassName={c.active}>Music</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/settings\" activeClassName={c.active}>Settings</NavLink>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\n// import c from \"./Music.module.css\";\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>music</div>\r\n    )\r\n}\r\n\r\nexport default Music;\r\n","import React from \"react\";\r\n// import c from \"./News.module.css\";\r\n\r\nconst News = () => {\r\n    return (\r\n        <div>news</div>\r\n    )\r\n}\r\n\r\nexport default News;\r\n","import React, {FC, useState} from \"react\";\r\nimport c from \"./Paginator.module.css\";\r\n\r\ntype Props = {\r\n    totalItemsCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    portionSize?: number\r\n}\r\n\r\nconst Paginator: FC<Props> = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);   // При totalUsersCount 19 и pageSize 5 не теряются последние пользователи\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const [portionNumber, setPortionNumber] = useState(1);// в локальном, т.к. это чисто ui-момент\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={c.paginator}>\r\n            {portionNumber > 1 &&\r\n            <button onClick={() => setPortionNumber(portionNumber - 1)}>\r\n                PREV\r\n            </button>}\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map(p => <span className={`${c.page} ${currentPage === p && c.selectedPage}`} onClick={() => onPageChanged(p)}>{p}</span>)}\r\n            {portionCount > portionNumber &&\r\n            <button onClick={() => setPortionNumber(portionNumber + 1)}>\r\n                NEXT\r\n            </button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Paginator;\r\n","import c from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/images/user.png\";\r\nimport React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst User = ({user, followingInProgress, follow, unfollow}) => {\r\n    return (\r\n        <div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={`/profile/${user.id}`}>\r\n                        <img src={user.photos.small ? user.photos.small : userPhoto} alt=\"\"\r\n                             className={c.userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {user.followed\r\n                        ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  onClick={() => unfollow(user.id)}>\r\n                            Unfollow\r\n                        </button>\r\n                        : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  onClick={() => follow(user.id)}>\r\n                            Follow\r\n                        </button>\r\n                    }\r\n                </div>\r\n            </span>\r\n            <span>\r\n                <span>\r\n                    <div>{user.name}</div>\r\n                    <div>{user.status}</div>\r\n                </span>\r\n                <span>\r\n                    <div>{\"user.location.country\"}</div>\r\n                    <div>{\"user.location.city\"}</div>\r\n                </span>\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;\r\n","import React, {FC} from \"react\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\nimport {UserType} from \"../../types/types\";\r\n\r\ntype Props = {\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n\r\n    onPageChanged: (pageNumber: number) => void\r\n    users: Array<UserType>\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nconst Users: FC<Props> = ({totalUsersCount, pageSize, currentPage, onPageChanged, users, follow, unfollow, followingInProgress}) => {\r\n    return (\r\n        <div>\r\n            <Paginator\r\n                currentPage={currentPage}\r\n                onPageChanged={onPageChanged}\r\n                totalItemsCount={totalUsersCount}\r\n                pageSize={pageSize}\r\n            />\r\n            {users.map(u => <User user={u} key={u.id} followingInProgress={followingInProgress} follow={follow}\r\n                                  unfollow={unfollow}/>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;\r\n","// Простые селекторы оставляем, сложные прогоняем через reselect\r\nimport {createSelector} from \"reselect\";\r\nimport {AppStateType} from \"./redux-store\";\r\n\r\nexport const getUsersSelector = ( state: AppStateType ) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector,\r\n    (users) => {    /* колбеку, чтобы сделать логику выборки, нужно получить из чего эта выборка будет происходить\r\n    но как createSelector поймёт каких именно пользователей засунуть. прежде чем перезапускаать этот колбек reselect посмотрит не изменились ли\r\n    зависимости и перезапустит её только если вернётся новый результат */\r\n    return users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = ( state: AppStateType ) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = ( state: AppStateType ) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = ( state: AppStateType ) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = ( state: AppStateType ) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = ( state: AppStateType ) => {\r\n    return state.usersPage.followingInProgress;\r\n}\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    requestUsers,\r\n    follow,\r\n    unfollow\r\n} from \"../../redux/users-reducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport { compose } from \"redux\";\r\nimport {\r\n    getUsers,\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount\r\n} from \"../../redux/users-selectors\";\r\nimport {UserType} from \"../../types/types\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n    currentPage: number\r\n    pageSize: number\r\n    isFetching: boolean\r\n    totalUsersCount: number\r\n    users: Array<UserType>\r\n    followingInProgress: Array<number>\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    getUsers: (pageNumber: number, pageSize: number) => void\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n    // пропсы, которые передали через атрибуты передали в теге\r\n}\r\n\r\ntype P = MapStatePropsType & MapDispatchPropsType & OwnPropsType;\r\n\r\nclass UsersContainer extends Component<P> {\r\n\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n\r\n    onPageChanged = ( pageNumber: number ) => {\r\n        this.props.getUsers(pageNumber, this.props.pageSize);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            users,\r\n            totalUsersCount,\r\n            pageSize,\r\n            currentPage,\r\n            isFetching,\r\n            followingInProgress,\r\n            follow,\r\n            unfollow\r\n        } = this.props;\r\n\r\n        return (\r\n            <>\r\n                {isFetching ? <Preloader /> : null}\r\n\r\n                <Users\r\n                    totalUsersCount={totalUsersCount}\r\n                    pageSize={pageSize}\r\n                    currentPage={currentPage}\r\n                    users={users}\r\n                    onPageChanged={this.onPageChanged}\r\n                    isFetching={isFetching}\r\n                    followingInProgress={followingInProgress}\r\n                    follow={follow}\r\n                    unfollow={unfollow}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n// const mapStateToProps = state => {  // Здесь сидит весь стейт приложения\r\n//     return {\r\n//         users: state.usersPage.users,\r\n//         pageSize: state.usersPage.pageSize,\r\n//         totalUsersCount: state.usersPage.totalUsersCount,\r\n//         currentPage: state.usersPage.currentPage,\r\n//         isFetching: state.usersPage.isFetching,\r\n//         followingInProgress: state.usersPage.followingInProgress\r\n//     }\r\n// }\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {  // Здесь сидит весь стейт приложения\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n// const mapDispatchToProps = dispatch => {\r\n//     return {\r\n//         follow: userId => {   //  колбек, т.к. презентационная компонента вызовет только по необходимости\r\n//             dispatch(followAC(userId))  // диспатчим результат работы actionCreator\r\n//         },\r\n//         unfollow: userId => {\r\n//             dispatch(unFollowAC(userId))\r\n//         },\r\n//         setUsers: users => {\r\n//             dispatch(setUsersAC(users))\r\n//         },\r\n//         setCurrentPage: pageNumber => {\r\n//             dispatch(setCurrentPageAC(pageNumber))\r\n//         },\r\n//         setTotalUsersCount: totalCount => {\r\n//             dispatch(setUsersTotalCountAC(totalCount))\r\n//         },\r\n//         toggleIsFetching: IsFetching => {\r\n//             dispatch(toggleIsFetchingAC(IsFetching))\r\n//         },\r\n//     }\r\n// }\r\n\r\n// follow: follow\r\n// в пропсы придёт не сам action creator, connect создаст колбэк, который внутри задиспатчит return action creator\r\n// export default connect(mapStateToProps, {\r\n//     setCurrentPage,\r\n//     getUsers,\r\n//     follow,\r\n//     unfollow\r\n// })(UsersContainer);\r\n\r\nexport default compose(\r\n    // WithAuthRedirect, теперь можно зайти на пользователей не авторизованному\r\n    // TStateProps, TDispatchProps, TOwnProps, DefaultRootState\r\n    connect<MapStatePropsType, MapDispatchPropsType, OwnPropsType, AppStateType>(mapStateToProps, {\r\n    getUsers: requestUsers,\r\n    follow,\r\n    unfollow\r\n})\r\n)(UsersContainer);\r\n","import React, {FC} from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport logo from \"../../logo.jpg\";\r\nimport s from \"./Header.module.css\";\r\n\r\ntype P = {\r\n    isAuth: boolean\r\n    login: string | null\r\n    logout: () => void\r\n}\r\n\r\nconst Header: FC<P> = ({isAuth, login, logout}) => {\r\n    return (\r\n        <header className={s.header}>\r\n            <img src={logo} alt=\"logo\" />\r\n            <div className={s.loginBlock}>\r\n                {isAuth\r\n                    ? <div style={{display: 'flex', alignItems: 'center'}}>\r\n                        {login}\r\n                        <input type=\"button\" className={s.btn} onClick={logout} value=\"Log out\" />\r\n                      </div>\r\n                    : <NavLink to={'/login'} className={s.btn}>\r\n                        Login\r\n                      </NavLink>\r\n                }\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAA4APIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8/pdAheViY4Gb1KDmkHh6Ef8ALGH/AL4FdM2lp5h+XjNOOnKD90V+4Ro0kkuU/F51qvM9Wcv/AMI/D/zxh/75o/4R+H/njD/3zXUf2ev92j+z1/u0eyp/ymftqndnL/8ACPw/88YP++BQPD0I/wCWMP8A3zXonwy+E+p/Fzxzp/h7RbNrrUtUnWCCMDqT71+kHgr/AINodf1fw3Z3GrePNP02/njDy2yWpk8okZ259f8ACuHGY3BYWyraNndhMFjcQm6Wp+Tf/CPw/wDPG3/74o/4R+IniC3P/ABxX6+J/wAGxd0fvfE2zGBkj7AeP1pP+IY28kj3L8SbP0GbA8frXn/2/lf8yOyOSZn1R+Qv/CPQ4/1MH/fFJ/wj8P8Azxh/75r7c/4KCf8ABITxd+wnpNvrl1f2uv8Ahu4fyTdwxlGhfsGHbNfJMOnqThlAwBnAzXsYWrhsRDnpWaPNxFLEUJclS9zmf+Efh/54w/8AfNH/AAj8P/PGH/vmuoGnKw3DGMZ6decY60DTFd2VfL+XrW/sYdInP7SrfWRy/wDwj8P/ADxh/wC+aP8AhH4f+eMP/fNdONPR/u7euB39z/I0q6YpH3V6D2p+xgo8ziP2lS9uY5j/AIR6Ef8ALGH/AL5o/wCEfhx/qYf++BXWWegyX93HbwwyTXEzBY440Ls5PQAAZJ4PAFe2+Df+CXPx08f6bHc6f8NNe8mZVZXniEAIIz0bnHT86561TDUn79kb0qeJqfBdnzL/AMI/D/zxh/75o/4R+H/njD/3zXpnxr+AviL9nb4hXHhbxhp/9ka1ZrG0tu5Dbd/I+YHHQiubGlLs429MnKnjPStIxpSXNGzTMakq8Jcsnqcv/wAI/D/zxh/75o/4R+H/AJ4w/wDfNdQunqw+7+lH9mr/AHT/AN8/1qvZU97C9pV/mOX/AOEfh/54w/8AfNH/AAj8P/PGH/vmuoOkqT0x06rjrQNGXbu4+gX+tHs6a3X4C9pVvpI5f/hH4f8AnjD/AN80f8I/D/zxh/75rp109P7q+nXv/L9aGsI0+9tUepPSq9jTe0Q9pU35jmP+Efh/54w/980f8I/D/wA8Yf8AvmunOnBeyt7r0pRp6/3aSo0+sQ9pV7nL/wDCPw/88Yf++aD4dhP/ACxh/wC+a6j+z1/u0f2cv90UvZU/5Q9pU7nLHw3D/wA84/8AvmkbwzGf+WcHTug/wrqjpyf3RTRpalum3Pp34olRp2tYca1RO/MzhbvR9l1IqrbqocgAL05+lFbWoxSLqE42NxIw++fX60V4MqMLn1Mak7HoX9ict82OT1HvQdIUHmQZ+ldNLo/zN82OTx9KQ6Fk9a+gjsj5ed7nNf2Ov/PT9KDo6Af6z9K6YaJgdqP7Fz3FUCPcv+CQWlRj9v3wOz/vFjmc4K/LnYcV+wP/AAVW+OHiT4D/APBP34l+LPCOoyaP4k0fTfMs7xArtbO0iLvXIIyAxGMd6/JX/glVZ/2d+234Qk7rM30+4xr9L/8Ags/f7v8AgmV8W14KtpScYz1mi/8ArV+e8TRUsdA+64ck44KbPz2/Zz8bft7ftAfss33xg8M/G63utJ0c3Bk0288pbiUQLuc4MO04GCBu/wAK+4f+CGH/AAUp8Xft+/BLxSnj63tX8VeBr6GzuL21i8lNRjmQlXMYyFYFWBweeDgZr86f2HP2d/2oPjd+wXqCfDHxrpdj8Pb6e6hm0UyCO6uJMDzcNtzhsAYzX0R/wbd/tEaLol34++Dc3hiPRPF2it/a15fRyNJ/aqxuIXEmRwyNtAA4w1eXjMLBU5tW07HqYPETdSHNfXuz68/4LaKuofsD+Jo5ArN50IBbPy/Pjj/GvwYfTWSNsyr8q9ScYxn/AAFfu7/wWGuPt/7DHiSP72ZYAD2OHr8RtQ0hRayKEXbjnA6+xr6nhKywsmfM8T3eLifaPwx/4IaW3xK/ZU0j4kf8LOs9EOpWSX8kd/ZolraqTht8u8YwOa6Txn/wQd8O+Jf2cbzxd8LfiwfGWpabC8jqIYpbG8ePO9I2Q5RuOM5zXsHx3um/4h6723jLr/xT8CYRipwbhQTnPoensayP+Ddrw1qXw/8A2R/Hs+pRzwaHe3ayWjT/ACxkLCfMK56Y7/QV41bNsXeVRTtaVrHrxyzCtRhKGsle58YfsPfsR/Dv48/D3xN4r+KXxWh+G+m+G9RGnNHIsbPM4G4ndI3uRgA179B/wRG+HP7Qfwi1LxN8B/jdH4yl04MDDcQRSRSyAE+WWiZTGzdsqQcVf/Yq/YE+EPib4IfEL47fEuzn8SaDZ6jqmpW+nxEyQwwW8jlnCL95yBgduK+lf+CO37WPwt/aC8L+NpPhZ8Nv+FfaLpk0ImbI3agWDbSxXIyB27ZqcZnGJdTnpTfTQeFyWjGHJVh8z5p/4N9P2TdO8R/GDxn4u8S6bDcah4MnOlWsU8Qb7NcA/O+D/EMECvfvjZ4e/br+NXiXxBfeCda8DfDbw/b3EyaPpEpSXUJoAxVXlkwQrOAGHAAzisH/AIIgeOrf/hOv2hNDglWG+j8YXc4VjhsMzBT9CQeemTXy7/wTZ+Ivxq0j/gqre6Xq3iHxbeWratexavY3sskkKW292B2ngfw7TXHiqlWvVlVn0Vzow9GjQpRpQ6ux8/eIv2fPjp+0v+3HL4L8ctdan8WtSuVsrk3aqixxoP8AWuyBR5KqM7gORX2nef8ABCr4T/CHTrS0+J3x6h0HxBqK5ht9tvaxhz02rIxdgD3JANfTUvijwrb/APBbOCFGs116f4dHf93zCfOJHPXd5eD1BxX5l/8ABav4aeI/FP8AwUd8UXviKHUZdMkt7b+xtyMYvI8oZVDyOGByBzzXoUcyrV5RoU5cit07nDUy6jQjKtKPO2z1K8/4JBfDPwt8T9Y8PeIv2jPDuiRwfZ5tOuLi1gDX8Uybg2DKASDx8rEe1ehfEH/ggF4D+FHha113xN+0RpuhaLeFBDe32kwW8EpcZUK7ThTnqPavzv8AEfwXvtM1vTE1+HUBcNHBJarqKtvWAkFNofnZ1A+tfp1/wXShj8Uf8EyvhvYyRiWNL2wAVlDD5YRzj2rrxlbG0p04Kr8Rjg6OFqxnL2drHhf7L3/BHjw3+1H8aPiB4b8O/F231DR/BRtli1ey05J47/zlycYl2jbg9DXoPh3/AIII+B/iPr2saT4T/aE0nXNf0ncJ7CLS4ZHt3BwRJsmLKAeDwa6H/g2r0yDwjY/FSOJcx+ZYHapPyZWTt9Bn8K9Q/YV+LP7Osv7bXxC0X4b6D4g0j4iX014NUvrq2YwySh2MhBzt+/yufWuLMM1xtGu4e02sdmByvD1aKfLvc/NnwX/wT48b+N/2xtY+C9q1vN4g0G9e3vbxM/ZYY1wfP6k4KkcetfV2k/8ABHD4Jv48T4e3vx6hPxK27TplvHHjzME4Ck57ZI64r2T/AIJu/Da6+BP/AAVC/aC0vxZr0OveJ9SsbPWbW+k2hpbeYsxyPVcgcegrzH9oX9sz9nn9mf8AbT1i+1j4D+JB470fU2uhrIJQ3chGRPG2eQQeg9aMVnWKqyUYytoTRybDUlKUlc+Hf2x/2Ptf/Yt+Otz4J8QXEF4+xbmyu4lKpfQNnDr7jByO1ea/2Ov/AD09xx2r6j/4Kpftgx/t0fFDwD4lsfBfiTwfDaaTLGG1iIRtfqZciSPuVADDPrmvAo9DCr26np2r7LKsVUrYdTqbnyeZYSNKs409jmP7IT/noPypDpC5/wBZXTtoQJ60o0THf9K9Q8rU5ddIU/8ALT9KDpKoMiT9Pauo/sX3H5UjaKpHUUMtJnm+oeHIXv5m39ZGP60V0Wp2rR6jcKNnyyMOnuaK+flJXZ9VGS5Uenz6QWdvlX7zDJ9qaNGY/wAMf5VvS2ZEsnIHzMfpQbDnqte5CSsj5mXxMwf7FPpH+VB0hh/zzrd+w/7v5Uh0/P8AdquZAerf8E3Yhpv7YvhORmUbZm74HKkda/TP/go/8Hte/aQ/Yj+IHgvw1BDca34g04QWKSTCNZJBIjYLHjsfyr8ivB2vXfgTxLZ6pp8v2e+s5RNDIvUEetfYnhb/AILGa9pujW9vqHheyvLmFArzidl8wjjOPXFfH5/leJr141qCvY+qyPMqFCjKlVejPE/2bP2ef+Cgn7MHwcHw98C6f4V0Xw/NNLIZJRaS3MTTcOyysxKngcgHFfUP/BIT/gltrX7DniHxJ4+8d6xb6x478UW4tJktpGaKyhL+ZJ8/8buwBOAOR75rmD/wWX1LH/In2o9P9Ibihf8Ags3qQLf8UfaFiSR/pLcZryK+V5hUi4qK13PTpZhgYSUua9tj3/8A4KyXaz/sca1G7/NLPCArKOfmr8ervQnW0mU7QVwSo/h/yK+mP2sf25/EX7UNjDYXUEOmaXBIJDbxNuDtjvXgracrRup27mB6nrmvp8hwNTDYZwnufOZ7j6eIrqVM/SbS/wBoO6/Zx/4JE2Xiy10fT/ED6LpML/2deoHgulMwBVwQR/FnoK+O/jx/wWi8e/Hj4Ly+DfBPgXTfh5aapbtDeXcVz50iRv8AfEIVVWPd/e5OK8j8QeLfHWv+Df8AhGH8UamfDLRiJ9NEmIGQHIBH1qjpfhiPS7NIlVV2rtxjOK48Lw+vayqV9dbo7cRnjVKMKfbU9O/Yf/4KL+LP2G/hTeeCbzwrZeO/CN00ksNlLP5L25kH7xNxVgyPySGBzk/Sus+G3/BaDxv8KdQ1ZfDfwd8A6PoN4Va20uyDWaW3ytuLNGvzMcjPAAPQAV4fJp4lXaVj2+gXr/WhdMVCp2xZXodvNd1TIsPKTlbc4KecV1FK+w39n39ozx5+zp8ctW+JXhlLaz1DXrmWe/0+QtJbXEcjlzCT14JwGxnvX03rX/BejxJb2k02j/BnQ7XxTcIQ+py3W6Pfzhm2oHcdMgkcivmVbDZnDKM9qQ6UhB2pEu7rhetXWyOhUfM73CnnFWCsu5h2HxY+Jmq/tBr8YrrxHcJ8QEuzdJeqv7uDjHlLHjHlbSV2HOQfWvrS0/4LqeIrjR7eHxl8GfD/AIm1azUBLyC6KRk/3tjxvtJPJwcA180jTdvTYPouP5UkmlpIeVjznOcdadbJ6E0rLVdiaObV4t3d0xf2i/2jPEX7X/xofxxrWh6ZoLCGC1gsLRmaOGGLdjLNyT9MD2rtP2sP27vF37V/wi8P+AdU8NaVpunaFPBIL23lYySFF2/dxjke9cWumbOm36baDpykn5U59q3/ALLpuMU/s7GP9oVU5W+0d1+x/wDtyeKP2DrXxB/wjvhLSPEsniQQiQ3t1JCIPLDfd2A5+8evrXdW3/BbTx9pk95faL8IvAWkatfBt13ErbmLdSxABJPua8KOmZHUdevcU5dLQIw2J82M4XriscRkmHrTc5LVm2HzatRjyRZS8OftD/Fix/aYuvjJ/bzL46vJCZZimIXhwF+z+X08raFH4Zr6fl/4LlavqVtCfFHwV0HWtWgHF0sylNwPXDxsRnrwcc182HTgnAKr6cDimyaSsxJZY23DByM0qmR4eaSs9CoZtXje+qL37T/7V3ij9tz4paX4j17QdL8Ow6HYtY2FpZsWjVC5fJ6cgnoMD2rlRorbVwseMDGV5Nb39nADChFA6ACl+w8fw9MV6GHoxow5Inm4jFSqz52YQ0Vsfdj/ACoOiE/8863PsXutH2L3WurnRz2MMaKR2jpP7FYt0j6+lbv2L3WgWPPVaHLS6KV7nm2qeHidTuPu/wCtb+Zorf1W0xqlzyn+tb+Zor5yXNc+ki9D0C4t1+0yA7ep9+tIYOeFQ/jiiiuuOOqWWiPPngad29RRAuPuJ/31Si3X+6v50UUvr1TyMvqsfMT7OofIVR/wLFEsfmD7q/XcKKKSx1R6uwvq0HoAt1I5UfgRSSQAjAjjGO+eTRRTWNnbZD+qwFjgCg/Lw3YHih7ZWP3V4/2qKKf1yb10E8PFLQGt95+6v04o+zqP+WcY9s0UVTxlTyD6rF9WHkL/AHU/76pRbrj7q/nRRU/XKgLCx7sa1qpP3V/76pVtlA+6v50UUfXJlfVY+Yv2df7oprQc8In4tRRVLGVEugfVY+YogXH3E/76pDBz9yP/AL6ooqfrkw+qx8xRAuPuJ/31R9mU/wAK/pRRR9cmH1WPmBtlz91f++sU3yMfwJ/31RRTWMnfoZ/V492Hkf8ATOP/AL6o8j/pnH/31RRSeOqX6FLCw8w+yqf4V/76oNqM/cT/AL6FFFH1yfkP6rHuwW0Xuq/99CnfZY1LZVV2853dqKKqWKnboOGFi5atnG6rcW41S5znPmtnA9zRRRXh/WJn0XsIn//Z\"","import React, { Component } from \"react\";\r\nimport Header from \"./Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../../redux/auth-reducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    logout: () => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n    // пропсы, которые передали через атрибуты передали в теге\r\n}\r\n\r\ntype P = MapStatePropsType & MapDispatchPropsType & OwnPropsType;\r\n\r\nclass HeaderContainer extends Component<P> {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login\r\n    }\r\n}\r\n\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, OwnPropsType, AppStateType>( mapStateToProps, { logout } )(HeaderContainer);\r\n","import React, {FC} from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport { Input } from \"../common/FormsControls/FormsControls\";\r\nimport { required } from \"../../utils/validators/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { login } from \"../../redux/auth-reducer\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport s from \"../common/FormsControls/FormsControls.module.css\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\nconst LoginForm: FC<InjectedFormProps<LoginFormValuesType & LoginFormOwnPropsType> & LoginFormOwnPropsType> = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>    {/* redux-form событие с e.preventDefault() чтобы страница не перезагружалась */}\r\n            <div>\r\n                <Field name='email' placeholder='Email' component={Input} validate={[required]} />\r\n            </div>\r\n            <div>\r\n                <Field name='password' placeholder='Password' component={Input} validate={[required]} />\r\n            </div>\r\n            <div>\r\n                <Field name='rememberMe' component='input' type='checkbox' /> remember me\r\n            </div>\r\n            {captchaUrl &&\r\n            <>\r\n                <img src={captchaUrl} alt=\"\" />\r\n                <Field name='captcha' placeholder='input captcha...' component={Input} validate={[required]} />\r\n            </>}\r\n            {error &&\r\n            <div className={s.formSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnPropsType>({form: 'login'})(LoginForm);\r\n\r\ntype LoginFormOwnPropsType = {\r\n    captchaUrl?: string | null\r\n}\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\n\r\ntype CommonType = LoginFormOwnPropsType & MapStatePropsType & MapDispatchPropsType;\r\n\r\n// Данные, собираемые формой\r\ntype LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\n\r\nconst Login: FC<CommonType> = ({login, isAuth, captchaUrl}) => {\r\n\r\n    const onSubmit = ( formData: LoginFormValuesType ) => {\r\n        login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'} />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Логин</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { login })(Login);\r\n","import React, {lazy, Suspense} from \"react\";\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport {Route, withRouter} from \"react-router-dom\";\r\nimport Music from \"./components/Music/Music\";\r\nimport News from \"./components/News/News\";\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport LoginPage from \"./components/Login/Login\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\n\r\nimport \"./App.css\";\r\n\r\n// в bundle не попадёт, а загрузится по мере необходимости\r\nconst ProfileContainer = lazy( () => import('./components/Profile/ProfileContainer'));\r\nconst DialogsContainer = lazy( () => import('./components/Dialogs/DialogsContainer'));\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n    componentDidMount() {\r\n        this.props.initializeApp();\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.initialized) {\r\n            return <Preloader />\r\n        }\r\n\r\n        return (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer />\r\n                <Navbar />\r\n                <div className='app-wrapper-content'>\r\n                    <Suspense fallback={<Preloader />}>\r\n                        {/*теперь /profile без парамаетра не открывается, указываем что он не обязателен*/}\r\n                        <Route path='/profile/:userId?' render={() => <ProfileContainer />}/>\r\n                        <Route exact path='/dialogs' render={() => <DialogsContainer />}/>\r\n                    </Suspense>\r\n                    <Route path='/users' render={() => <UsersContainer />}/>\r\n                    <Route path='/news' component={News}/>\r\n                    <Route path='/music' component={Music}/>\r\n                    <Route path='/login' component={LoginPage}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        initialized: state.app.initialized\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(mapStateToProps, { initializeApp })\r\n)(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport store from './redux/redux-store';\r\nimport App from \"./App\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n    // Разные люди хотят видеть здесь иные значения, поэтому нельзя 'https://alexandr1111.github.io/social-network',\r\n    // не будет работать на localhost\r\n    // hashRouter - работает на якорях как раньше, решает проблему с 404 при обновлении страницы после\r\n    // https://alexandr1111.github.io/social-network/profile(или другие адреса) если не писать basename\r\n    //basename={process.env.PUBLIC_URL}\r\n    <Router>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </Router>,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n// с введением connect подписка не нужна, он сам субскрайбится\r\n// store.subscribe(() => { // Когда стейт изменится, стор вызовет нашу стрелочную функцию, чтобы запросит заново стейт\r\n//     rerenderEntireTree();\r\n// })\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__E9CiO\",\"error\":\"FormsControls_error__2cgCt\",\"formSummaryError\":\"FormsControls_formSummaryError__gtRpS\"};","export default __webpack_public_path__ + \"static/media/preloader.30e900c6.gif\";","import React from \"react\";\r\nimport preloader from \"../../../assets/images/preloader.gif\";\r\n\r\nconst Preloader = (props) => {\r\n    return (\r\n        <div>\r\n            <img src={preloader} alt=\"preloader\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1MZ7r\",\"loginBlock\":\"Header_loginBlock__3BN1t\",\"btn\":\"Header_btn__1enWH\"};","import React, {FC} from 'react';\r\nimport s from './FormsControls.module.css';\r\nimport {WrappedFieldProps} from \"redux-form\";\r\n\r\ntype FormControlPropsType = {\r\n    children: React.ReactNode\r\n}\r\n\r\nconst FormControl: FC<FormControlPropsType & WrappedFieldProps> = (props: WrappedFieldProps & FormControlPropsType ) => {\r\n\r\n    const hasError = props.meta.error && props.meta.touched;\r\n\r\n    return (\r\n        <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n            <div>\r\n                {props.children}\r\n            </div>\r\n            {hasError && <span>{props.meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\ntype TextareaType = {\r\n    restProps: string\r\n}\r\n\r\nexport const Textarea: FC<TextareaType & WrappedFieldProps> = (props) => {\r\n\r\n    const { input, meta, restProps } = props;\r\n\r\n    return (\r\n        <FormControl {...props}>\r\n            <textarea {...input} {...props} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport const Input: FC<TextareaType & WrappedFieldProps> = (props) => {\r\n\r\n    const { input, meta, restProps } = props;\r\n\r\n    return (\r\n        <FormControl {...props}>\r\n            <input {...input} {...props} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\n// export const Textarea = ({input, meta, ...props}) => {\r\n//\r\n//     const hasError = meta.error && meta.touched;\r\n//\r\n//     return (\r\n//         <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n//             <div>\r\n//                 <textarea {...input} {...props} />\r\n//             </div>\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n\r\n// export const Input = ({input, meta, ...props}) => {\r\n//\r\n//     const hasError = meta.error && meta.touched;\r\n//\r\n//     return (\r\n//         <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n//             <div>\r\n//                 <input {...input} {...props} />\r\n//             </div>\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n","export type FieldValidatorType = ( value: string ) => string | undefined\r\n\r\nexport const required: FieldValidatorType = ( value ) => {\r\n    if (value) {\r\n        return undefined;\r\n    }\r\n\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = ( maxLength: number ): FieldValidatorType => {\r\n    return ( value ) => {\r\n        if (value.length > maxLength) {\r\n            return `Max length is ${maxLength} symbols`;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__3lYu0\",\"page\":\"Paginator_page__3bLuB\",\"selectedPage\":\"Paginator_selectedPage__LaTfF\"};","import { profileAPI } from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport { PostType, ProfileType, PhotosType } from \"../types/types\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppStateType} from \"./redux-store\";\r\n\r\nconst ADD_POST = 'profile/ADD_POST';\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE';\r\nconst SET_STATUS = 'profile/SET_STATUS';\r\nconst DELETE_POST = 'profile/DELETE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'profile/SAVE_PHOTO_SUCCESS';\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {id: 1, message: \"Хай, это мой первый пост!\", likeCount: 4},\r\n        {id: 2, message: \"Новая Зеландия, жди меня!♥\", likeCount: 18}] as Array<PostType>,\r\n    profile: null as ProfileType | null,\r\n    status: '' as string,\r\n    newPostText: '' as string\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst profileReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost = { id: 5, message: action.newPostText, likeCount: 0 };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: \"\"\r\n            };\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id !== action.postId)\r\n            }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as ProfileType\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = AddPostActionCreatorActionType\r\n    | SetUserProfileActionType\r\n    | SetStatusActionType\r\n    | DeletePostActionType\r\n    | SavePhotoSuccessActionType;\r\n\r\nexport type AddPostActionCreatorActionType = {\r\n    type: typeof ADD_POST\r\n    newPostText: string\r\n}\r\n\r\nexport const addPostActionCreator = ( newPostText: string): AddPostActionCreatorActionType => ({ type: ADD_POST, newPostText });\r\n\r\nexport type SetUserProfileActionType = {\r\n    type: typeof SET_USER_PROFILE\r\n    profile: ProfileType\r\n}\r\n\r\nexport const setUserProfile = ( profile: ProfileType ): SetUserProfileActionType => ({ type: SET_USER_PROFILE, profile });\r\n\r\nexport type SetStatusActionType = {\r\n    type: typeof SET_STATUS\r\n    status: string\r\n}\r\n\r\nexport const setStatus = ( status: string ): SetStatusActionType => ({ type: SET_STATUS, status });\r\n\r\nexport type DeletePostActionType = {\r\n    type: typeof DELETE_POST\r\n    postId: number\r\n}\r\n\r\nexport const deletePost = ( postId: number ): DeletePostActionType => ({ type: DELETE_POST, postId });\r\n\r\nexport type SavePhotoSuccessActionType = {\r\n    type: typeof SAVE_PHOTO_SUCCESS\r\n    photos: PhotosType\r\n}\r\n\r\nexport const savePhotoSuccess = ( photos: PhotosType ): SavePhotoSuccessActionType => ({ type: SAVE_PHOTO_SUCCESS, photos });\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsType>;\r\n\r\nexport const getUserProfile = ( userId: number | null ): ThunkType => async (dispatch) => {\r\n    const response = await profileAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data));\r\n}\r\n\r\nexport const getStatus = ( userId: number ): ThunkType => async (dispatch) => {\r\n    const response = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(response.data));\r\n}\r\n\r\nexport const updateStatus = ( status: string ): ThunkType => async (dispatch) => {\r\n    const response = await profileAPI.updateStatus(status);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status));\r\n    }\r\n}\r\n\r\nexport const savePhoto = ( file: any ): ThunkType => async (dispatch) => {\r\n    const response = await profileAPI.savePhoto(file);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos));\r\n    }\r\n}\r\n\r\nexport const saveProfile = ( profile: ProfileType ): ThunkType => async (dispatch, getState) => {\r\n    const userId =  getState().auth.userId;\r\n    const response = await profileAPI.saveProfile(profile);\r\n    if (response.data.resultCode === 0) {\r\n        await dispatch(getUserProfile(userId));\r\n    }\r\n    else {\r\n        const messages = response.data.messages;\r\n        for (const message of messages) {\r\n            const socialNetworkName = message\r\n                .slice(0,-1)    // убрали скобку\r\n                .toLowerCase()\r\n                .split(\"(\")[1]  // убрали \"invalid url format\"\r\n                .split(\"->\")[1]    // разделили на [contacts, [network]] и взяли [network]\r\n            // @ts-ignore\r\n            dispatch(stopSubmit('edit-profile', {\r\n                \"contacts\": { [socialNetworkName]: message.toLowerCase().includes(socialNetworkName) && message }\r\n            }));\r\n        }\r\n        return Promise.reject(\"reject\");\r\n    }\r\n}\r\n\r\nexport default profileReducer;\r\n"],"sourceRoot":""}