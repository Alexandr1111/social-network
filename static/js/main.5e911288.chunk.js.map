{"version":3,"sources":["redux/dialogs-reducer.ts","assets/images/user.png","components/Users/Users.module.css","components/Navbar/Navbar.module.css","utils/object-helpers.ts","api/users-api.ts","redux/users-reducer.ts","api/auth-api.ts","api/security-api.ts","redux/auth-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/Navbar/Navbar.jsx","components/Music/Music.jsx","components/News/News.tsx","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/Users.tsx","redux/selectors/users-selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","logo.jpg","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","App.tsx","index.js","components/common/FormsControls/FormsControls.module.css","assets/images/preloader.gif","components/common/Preloader/Preloader.tsx","components/Header/Header.module.css","components/common/FormsControls/FormsControls.tsx","utils/validators/validators.ts","components/common/Paginator/Paginator.module.css","api/api.ts","api/prof1le-api.ts","redux/profile-reducer.ts"],"names":["SEND_MESSAGE","initialState","messages","id","message","dialogs","name","actions","sendMessage","newMessageBody","type","dialogsReducer","state","action","newMessage","module","exports","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","usersAPI","currentPage","pageSize","instance","get","then","res","data","userId","post","delete","users","totalUsersCount","isFetching","followingInProgress","count","usersReducer","followed","filter","authAPI","email","password","rememberMe","captcha","securityAPI","SET_USER_DATA","GET_CAPTCHA_URL_SUCCESS","login","isAuth","captchaUrl","payload","getAuthUserData","dispatch","a","resultCode","ResultCodesEnum","Success","getCaptchaUrl","url","authReducer","SET_INITIALIZED_SUCCESS","initialized","appReducer","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","usersPage","auth","app","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Navbar","className","c","nav","item","to","activeClassName","active","Music","News","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","onClick","p","page","selectedPage","User","user","follow","unfollow","src","photos","small","userPhoto","alt","disabled","some","status","Users","getUsers","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","pageNumber","props","this","Preloader","Component","connect","getState","response","totalCount","alert","Header","logout","s","header","loginBlock","style","display","alignItems","btn","value","HeaderContainer","LoginReduxForm","reduxForm","handleSubmit","error","onSubmit","Field","placeholder","component","Input","validate","required","formSummaryError","CaptchaIsRequired","length","stopSubmit","_error","formData","Suspense","React","lazy","DialogsContainer","ProfileContainer","App","initializeApp","fallback","path","render","exact","LoginPage","withRouter","promise1","Promise","all","ReactDOM","document","getElementById","preloader","FormControl","hasError","meta","touched","formControl","children","Textarea","input","restProps","maxLengthCreator","maxLength","axios","create","baseURL","withCredentials","headers","profileAPI","put","photoFile","FormData","append","profile","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","posts","likeCount","newPostText","addPostActionCreator","setUserProfile","setStatus","deletePost","postId","savePhotoSuccess","getUserProfile","getStatus","updateStatus","savePhoto","file","saveProfile","Error","socialNetworkName","slice","toLowerCase","split","includes","reject","newPost"],"mappings":"6KAGMA,EAAe,0BAEfC,EAAe,CACjBC,SAAU,CAAC,CAACC,GAAI,EAAGC,QAAS,mBAAoB,CAACD,GAAI,EAAGC,QAAS,8BAA+B,CAACD,GAAI,EAAGC,QAAS,cACjHC,QAAS,CAAC,CAACF,GAAI,EAAGG,KAAM,QAAS,CAACH,GAAI,EAAGG,KAAM,SAAU,CAACH,GAAI,EAAGG,KAAM,QAAS,CAACH,GAAI,EAAGG,KAAM,WAqBrFC,EAAU,CACnBC,YAAa,SAACC,GAAD,MAA8B,CAAEC,KAAMV,EAAcS,oBAGtDE,IApBQ,WAAoE,IAAlEC,EAAiE,uDAAzDX,EAAcY,EAA2C,uCAEtF,GAAQA,EAAOH,OACNV,EAAL,CACI,IAAMc,EAAa,CAAEX,GAAI,EAAGC,QAASS,EAAOJ,gBAC5C,OAAO,2BACAG,GADP,IAEIV,SAAS,GAAD,mBAAMU,EAAMV,UAAZ,CAAsBY,MAGlC,OAAOF,I,iCCtBJ,QAA0B,kC,oBCCzCG,EAAOC,QAAU,CAAC,UAAY,yBAAyB,aAAe,8B,mBCAtED,EAAOC,QAAU,CAAC,IAAM,oBAAoB,KAAO,qBAAqB,OAAS,yB,oKCDpEC,EAAsB,SAACC,EAAYC,EAAaC,EAAkBC,GAC3E,OAAOH,EAAMI,KAAI,SAACC,GACd,OAAIA,EAAEH,KAAiBD,EACZ,2BAAII,GAAMF,GAEdE,M,OCHFC,EAAW,WACsB,IAAjCC,EAAgC,uDAAlB,EAAGC,EAAe,uDAAJ,GACjC,OAAOC,IACFC,IADE,sBAC+BH,EAD/B,kBACoDC,IACtDG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAJhBP,EAAW,SAMbQ,GACH,OAAOL,IACFM,KADE,iBAC8BD,IAChCH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAThBP,EAAW,SAWXQ,GACL,OAAOL,IACFO,OADE,iBACgCF,IAClCH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SCCvB9B,EAAe,CACjBkC,MAAO,GACPT,SAAU,GACVU,gBAAiB,EACjBX,YAAa,EACbY,YAAY,EACZC,oBAAqB,IAoDZ/B,EACM,SAAEyB,GAAF,MAAuB,CAAEtB,KAAM,SAAUsB,WAD/CzB,EAEQ,SAAEyB,GAAF,MAAuB,CAAEtB,KAAM,WAAYsB,WAFnDzB,EAGC,SAAE4B,GAAF,MAA+B,CAAEzB,KAAM,YAAayB,UAHrD5B,EAIO,SAAEkB,GAAF,MAA4B,CAAEf,KAAM,mBAAoBe,gBAJ/DlB,EAKW,SAAE6B,GAAF,MAAgC,CAAE1B,KAAM,wBAAyB6B,MAAOH,IALnF7B,EAMS,SAAE8B,GAAF,MAA4B,CAAE3B,KAAM,qBAAsB2B,eANnE9B,EAOkB,SAAE8B,EAAqBL,GAAvB,MAA4C,CAAEtB,KAAM,+BAAgC2B,aAAYL,WAsChHQ,EA3FM,WAAoE,IAAlE5B,EAAiE,uDAAzDX,EAAcY,EAA2C,uCACpF,OAAQA,EAAOH,MACX,IAAK,SACD,OAAO,2BACAE,GADP,IAEIuB,MAAOlB,EAAoBL,EAAMuB,MAAOtB,EAAOmB,OAAQ,KAAM,CAACS,UAAU,MAEhF,IAAK,WACD,OAAO,2BACA7B,GADP,IAEIuB,MAAOlB,EAAoBL,EAAMuB,MAAOtB,EAAOmB,OAAQ,KAAM,CAACS,UAAU,MAEhF,IAAK,YACD,OAAO,2BACA7B,GADP,IAEIuB,MAAOtB,EAAOsB,QAEtB,IAAK,mBACD,OAAO,2BACAvB,GADP,IAEIa,YAAaZ,EAAOY,cAE5B,IAAK,wBACD,OAAO,2BACAb,GADP,IAEIwB,gBAAiBvB,EAAO0B,QAEhC,IAAK,qBACD,OAAO,2BACA3B,GADP,IAEIyB,WAAYxB,EAAOwB,aAE3B,IAAK,+BACD,OAAO,2BACAzB,GADP,IAEI0B,oBAAqBzB,EAAOwB,WAAP,sBACXzB,EAAM0B,qBADK,CACgBzB,EAAOmB,SACtCpB,EAAM0B,oBAAoBI,QAAO,SAAAvC,GAAE,OAAIA,IAAOU,EAAOmB,YAEnE,QACI,OAAOpB,I,QCzDN+B,EAAU,WAEf,OAAOhB,IACFC,IAAyC,WACzCC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAJhBY,EAAU,SAMbC,EAAeC,GAAsE,IAApDC,EAAmD,wDAA/BC,EAA+B,uDAAN,KAChF,OAAOpB,IACFM,KAA6C,aAAc,CAAEW,QAAOC,WAAUC,aAAYC,YAC1FlB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAThBY,EAAU,WAYf,OAAOhB,IACFO,OAAwB,cACxBL,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SCpBhBiB,EAAc,WAEnB,OAAOrB,IACFC,IAA+B,4BAC/BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SCJvBkB,EAAgB,wBAChBC,EAA0B,kCAE1BjD,EAAe,CACjB+B,OAAQ,KACRY,MAAO,KACPO,MAAO,KACPC,QAAQ,EACRC,WAAY,MAyBH9C,EACQ,SAACyB,EAAuBY,EAAsBO,EAAsBC,GAApE,MACZ,CAAE1C,KAAMuC,EAAeK,QAAS,CAAEtB,SAAQY,QAAOO,QAAOC,YAFpD7C,EAGa,SAAC8C,GAAD,MAAyB,CAAE3C,KAAMwC,EAAyBG,eAGvEE,EAAkB,yDAAiB,WAAOC,GAAP,uBAAAC,EAAA,sEACzBd,IADyB,QACtCZ,EADsC,QAEnC2B,aAAeC,IAAgBC,UAAU,EACjB7B,EAAKA,KAA1B5B,EADqC,EACrCA,GAAIyC,EADiC,EACjCA,MAAOO,EAD0B,EAC1BA,MACnBK,EAASjD,EAAwBJ,EAAIyC,EAAOO,GAAO,KAJX,2CAAjB,uDA8BlBU,EAAgB,yDAAiB,WAAOL,GAAP,iBAAAC,EAAA,sEACvBT,IADuB,OACpCjB,EADoC,OAEpCsB,EAAatB,EAAK+B,IACxBN,EAASjD,EAA6B8C,IAHI,2CAAjB,uDAMdU,EA7DK,WAAoE,IAAlEnD,EAAiE,uDAAzDX,EAAcY,EAA2C,uCACnF,OAAQA,EAAOH,MACX,KAAKuC,EACD,OAAO,2BACArC,GACAC,EAAOyC,SAElB,KAAKJ,EACD,OAAO,2BACAtC,GADP,IAEIyC,WAAYxC,EAAOwC,aAE3B,QACI,OAAOzC,IC9BboD,EAA0B,iCAE1B/D,EAAe,CACjBgE,aAAa,GAoBJ1D,EACW,iBAAO,CAAEG,KAAMsD,IAaxBE,EA5BI,WAAoE,IAAlEtD,EAAiE,uDAAzDX,EAAcY,EAA2C,uCAClF,OAAQA,EAAOH,OACNsD,EACM,2BACApD,GADP,IAEIqD,aAAa,IAGVrD,G,kBCXbuD,EAAcC,YAAgB,CAChCC,YAAaC,IACbC,YAAa5D,IACb6D,UAAWhC,EACXiC,KAAMV,EACNW,IAAKR,EACLS,KAAMC,MAeJC,EAAmBC,OAAOC,sCAAwCC,IAGzDC,EAFDC,YAAYf,EAAaU,EAAiBM,YAAgBC,O,sECFzDC,GAzBA,WACX,OACI,uBAAKC,UAAWC,KAAEC,IAAlB,UACI,sBAAKF,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,WAAWC,gBAAiBJ,KAAEK,OAA1C,uBAEJ,sBAAKN,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,WAAWC,gBAAiBJ,KAAEK,OAA1C,wBAEJ,sBAAKN,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,SAASC,gBAAiBJ,KAAEK,OAAxC,qBAEJ,sBAAKN,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,QAAQC,gBAAiBJ,KAAEK,OAAvC,oBAEJ,sBAAKN,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,SAASC,gBAAiBJ,KAAEK,OAAxC,qBAEJ,sBAAKN,UAAWC,KAAEE,KAAlB,SACI,eAAC,KAAD,CAASC,GAAG,YAAYC,gBAAiBJ,KAAEK,OAA3C,4B,SCdDC,GAND,WACV,OACI,0CCIOC,GANE,WACb,OACI,yC,sCCmCOC,GA7Bc,SAAC,GAG1B,IAHyG,IAA9EC,EAA6E,EAA7EA,gBAAiBtE,EAA4D,EAA5DA,SAAUD,EAAkD,EAAlDA,YAAawE,EAAqC,EAArCA,cAAqC,IAAtBC,mBAAsB,MAAR,GAAQ,EAClGC,EAAaC,KAAKC,KAAKL,EAAkBtE,GAC3C4E,EAAQ,GACHC,EAAI,EAAGA,GAAKJ,EAAYI,IAC7BD,EAAME,KAAKD,GAGf,IAAME,EAAeL,KAAKC,KAAKF,EAAaD,GAC5C,EAA0CQ,mBAAS,GAAnD,oBAAOC,EAAP,KAAsBC,EAAtB,KACMC,GAAyBF,EAAgB,GAAKT,EAAc,EAC5DY,EAAyBH,EAAgBT,EAE/C,OACI,uBAAKZ,UAAWC,KAAEwB,UAAlB,UACKJ,EAAgB,GACjB,yBAAQK,QAAS,kBAAMJ,EAAiBD,EAAgB,IAAxD,kBAGCL,EACI5D,QAAO,SAAAuE,GAAC,OAAIA,GAAKJ,GAAyBI,GAAKH,KAC/CxF,KAAI,SAAA2F,GAAC,OAAI,uBAAM3B,UAAS,UAAKC,KAAE2B,KAAP,YAAezF,IAAgBwF,GAAK1B,KAAE4B,cAAgBH,QAAS,kBAAMf,EAAcgB,IAAlG,SAAuGA,OACpHR,EAAeE,GAChB,yBAAQK,QAAS,kBAAMJ,EAAiBD,EAAgB,IAAxD,sB,+BCaGS,GArCiB,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,KAAM/E,EAA2C,EAA3CA,oBAAqBgF,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,SACjE,OACI,iCACI,kCACI,+BACI,eAAC,KAAD,CAAS7B,GAAE,mBAAc2B,EAAKlH,IAA9B,SACI,sBAAKqH,IAAKH,EAAKI,OAAOC,MAAQL,EAAKI,OAAOC,MAAQC,KAAWC,IAAI,GAC5DtC,UAAWC,KAAEoC,gBAG1B,+BACKN,EAAK5E,SACA,yBAAQoF,SAAUvF,EAAoBwF,MAAK,SAAA3H,GAAE,OAAIA,IAAOkH,EAAKlH,MACrD6G,QAAS,kBAAMO,EAASF,EAAKlH,KADrC,sBAIA,yBAAQ0H,SAAUvF,EAAoBwF,MAAK,SAAA3H,GAAE,OAAIA,IAAOkH,EAAKlH,MACrD6G,QAAS,kBAAMM,EAAOD,EAAKlH,KADnC,yBAOd,kCACI,kCACI,+BAAMkH,EAAK/G,OACX,+BAAM+G,EAAKU,YAEf,kCACI,+BAAM,0BACN,+BAAM,iCCNXC,GAfe,SAAC,GAA2G,IAA1G5F,EAAyG,EAAzGA,gBAAiBV,EAAwF,EAAxFA,SAAUD,EAA8E,EAA9EA,YAAawE,EAAiE,EAAjEA,cAAe9D,EAAkD,EAAlDA,MAAOmF,EAA2C,EAA3CA,OAAQC,EAAmC,EAAnCA,SAAUjF,EAAyB,EAAzBA,oBAC5G,OACI,iCACI,eAAC,GAAD,CACIb,YAAaA,EACbwE,cAAeA,EACfD,gBAAiB5D,EACjBV,SAAUA,IAEbS,EAAMb,KAAI,SAAAC,GAAC,OAAI,eAAC,GAAD,CAAM8F,KAAM9F,EAAce,oBAAqBA,EAAqBgF,OAAQA,EACtEC,SAAUA,GADIhG,EAAEpB,W,mBCnBrC8H,GAAWC,cAJQ,SAAEtH,GAC9B,OAAOA,EAAM4D,UAAUrC,SAIvB,SAACA,GAGD,OAAOA,EAAMO,QAAO,SAAAnB,GAAC,OAAI,QAGhB4G,GAAc,SAAEvH,GACzB,OAAOA,EAAM4D,UAAU9C,UAGd0G,GAAqB,SAAExH,GAChC,OAAOA,EAAM4D,UAAUpC,iBAGdiG,GAAiB,SAAEzH,GAC5B,OAAOA,EAAM4D,UAAU/C,aAGd6G,GAAgB,SAAE1H,GAC3B,OAAOA,EAAM4D,UAAUnC,YAGdkG,GAAyB,SAAE3H,GACpC,OAAOA,EAAM4D,UAAUlC,qBCUrBkG,G,6MAMFvC,cAAgB,SAAEwC,GACd,EAAKC,MAAMT,SAASQ,EAAY,EAAKC,MAAMhH,W,uDAL/C,WACIiH,KAAKD,MAAMT,SAASU,KAAKD,MAAMjH,YAAakH,KAAKD,MAAMhH,Y,oBAO3D,WACI,MASIiH,KAAKD,MARLvG,EADJ,EACIA,MACAC,EAFJ,EAEIA,gBACAV,EAHJ,EAGIA,SACAD,EAJJ,EAIIA,YACAY,EALJ,EAKIA,WACAC,EANJ,EAMIA,oBACAgF,EAPJ,EAOIA,OACAC,EARJ,EAQIA,SAGJ,OACI,uCACKlF,EAAa,eAACuG,GAAA,EAAD,IAAgB,KAE9B,eAAC,GAAD,CACIxG,gBAAiBA,EACjBV,SAAUA,EACVD,YAAaA,EACbU,MAAOA,EACP8D,cAAe0C,KAAK1C,cACpB5D,WAAYA,EACZC,oBAAqBA,EACrBgF,OAAQA,EACRC,SAAUA,W,GAnCDsB,aAgGd7D,eAGX8D,cA9CoB,SAAElI,GACtB,MAAO,CACHuB,MAAO8F,GAASrH,GAChBc,SAAUyG,GAAYvH,GACtBwB,gBAAiBgG,GAAmBxH,GACpCa,YAAa4G,GAAezH,GAC5ByB,WAAYiG,GAAc1H,GAC1B0B,oBAAqBiG,GAAuB3H,MAuC8C,CAC9FqH,SbzDwB,SAAEf,EAAcxF,GAAhB,8CAAsC,WAAO8B,EAAiCuF,GAAxC,eAAAtF,EAAA,6DAC9DD,EAASjD,GAAyB,IAClCiD,EAASjD,EAAuB2G,IAF8B,SAIvC1F,EAAkB0F,EAAMxF,GAJe,OAIxDsH,EAJwD,OAK9DxF,EAASjD,GAAyB,IAClCiD,EAASjD,EAAiByI,EAAS9H,QACnCsC,EAASjD,EAA2ByI,EAASC,aAPiB,2CAAtC,yDa0DxB3B,ObhDkB,SAAEtF,GAAF,8CAAiC,WAAOwB,GAAP,SAAAC,EAAA,6DACnDD,EAASjD,GAAkC,EAAMyB,IADE,kBAI5BR,EAAgBQ,GAJY,cAKtC0B,aAAeC,IAAgBC,SACpCJ,EAASjD,EAAsByB,IAEnCwB,EAASjD,GAAkC,EAAOyB,IARH,gDAW/CkH,MAAM,SAXyC,yDAAjC,uDaiDlB3B,SblCoB,SAAEvF,GAAF,8CAAiC,WAAOwB,GAAP,SAAAC,EAAA,6DACrDD,EAASjD,GAAkC,EAAMyB,IADI,SAGlCR,EAAkBQ,GAHgB,cAI5C0B,aAAeC,IAAgBC,SACpCJ,EAASjD,EAAwByB,IAErCwB,EAASjD,GAAkC,EAAOyB,IAPG,2CAAjC,yDa4BTgD,CAQbwD,I,oBCpHaW,GAnBO,SAAC,GAA6B,IAA5B/F,EAA2B,EAA3BA,OAAQD,EAAmB,EAAnBA,MAAOiG,EAAY,EAAZA,OACnC,OACI,0BAAQ9D,UAAW+D,KAAEC,OAArB,UACI,sBAAK9B,ICdF,klODcaI,IAAI,SACpB,sBAAKtC,UAAW+D,KAAEE,WAAlB,SACKnG,EACK,uBAAKoG,MAAO,CAACC,QAAS,OAAQC,WAAY,UAA1C,UACGvG,EACD,wBAAOzC,KAAK,SAAS4E,UAAW+D,KAAEM,IAAK3C,QAASoC,EAAQQ,MAAM,eAEhE,eAAC,KAAD,CAASlE,GAAI,SAAUJ,UAAW+D,KAAEM,IAApC,yBEAhBE,G,6JACF,WACI,OAAO,eAAC,GAAD,eAAYlB,KAAKD,Y,GAFFG,aAafC,iBAPS,SAAElI,GACtB,MAAO,CACHwC,OAAQxC,EAAM6D,KAAKrB,OACnBD,MAAOvC,EAAM6D,KAAKtB,SAIoF,CAAEiG,ObkC1F,yDAAiB,WAAO5F,GAAP,SAAAC,EAAA,sEAChBd,IADgB,cAE1Be,aAAeC,IAAgBC,SACpCJ,EAASjD,EAAwB,KAAM,KAAM,MAAM,IAHpB,2CAAjB,wDalCPuI,CAA4Ge,I,0DCIrHC,GAAiBC,aAAsD,CAACpF,KAAM,SAA7DoF,EA5BuF,SAAC,GAAuC,IAAtCC,EAAqC,EAArCA,aAAcC,EAAuB,EAAvBA,MAAO5G,EAAgB,EAAhBA,WACjI,OACI,wBAAM6G,SAAUF,EAAhB,iBACI,+BACI,eAACG,GAAA,EAAD,CAAO7J,KAAK,QAAQ8J,YAAY,QAAQC,UAAWC,KAAOC,SAAU,CAACC,UAEzE,+BACI,eAACL,GAAA,EAAD,CAAO7J,KAAK,WAAW8J,YAAY,WAAWC,UAAWC,KAAOC,SAAU,CAACC,UAE/E,iCACI,eAACL,GAAA,EAAD,CAAO7J,KAAK,aAAa+J,UAAU,QAAQ3J,KAAK,aADpD,kBAGC2C,GACD,uCACI,sBAAKmE,IAAKnE,EAAYuE,IAAI,KAC1B,eAACuC,GAAA,EAAD,CAAO7J,KAAK,UAAU8J,YAAY,mBAAmBC,UAAWC,KAAOC,SAAU,CAACC,WAErFP,GACD,sBAAK3E,UAAW+D,KAAEoB,iBAAlB,SACKR,IAEL,+BACI,oDAwDDnB,iBAPS,SAAElI,GACtB,MAAO,CACHwC,OAAQxC,EAAM6D,KAAKrB,OACnBC,WAAYzC,EAAM6D,KAAKpB,cAIS,CAAEF,MdnCrB,SAAEP,EAAeC,EAAkBC,EAAqBC,GAAxD,8CAAqF,WAAOS,GAAP,iBAAAC,EAAA,sEACnFd,EAAcC,EAAOC,EAAUC,EAAYC,GADwC,WAChGhB,EADgG,QAE7F2B,aAAeC,IAAgBC,QAF8D,gCAG5FJ,EAASD,KAHmF,iCAM9FxB,EAAK2B,aAAeC,IAAgB+G,kBAN0D,kCAOxFlH,EAASK,KAP+E,QAS5FzD,EAAU2B,EAAK7B,SAASyK,OAAS5I,EAAK7B,SAAS,GAAK,aAE1DsD,EAASoH,YAAW,QAAS,CAAEC,OAAQzK,KAX2D,4CAArF,wDcmCN0I,EAzBe,SAAC,GAAiC,IAAhC3F,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,WAM3C,OAAID,EACO,eAAC,KAAD,CAAUsC,GAAI,aAIrB,iCACI,iEACA,eAACoE,GAAD,CAAgBI,SAXP,SAAEY,GACf3H,EAAM2H,EAASlI,MAAOkI,EAASjI,SAAUiI,EAAShI,WAAYgI,EAAS/H,UAU/BM,WAAYA,UC5DtD0H,I,OAAYC,IAAcD,UAC1BE,GAAQD,IAAcC,KAEtBC,GAAmBD,IAAM,kBAAM,iCAC/BE,GAAmBF,IAAM,kBAAM,iCAY/BG,G,wKACF,WACIzC,KAAKD,MAAM2C,kB,oBAGf,WACI,OAAI1C,KAAKD,MAAMzE,YAKX,uBAAKqB,UAAU,cAAf,UACI,eAAC,GAAD,IACA,eAAC,GAAD,IACA,uBAAKA,UAAU,sBAAf,UACI,gBAACyF,GAAD,CAAUO,SAAU,eAAC1C,GAAA,EAAD,IAApB,UAEI,eAAC,KAAD,CAAO2C,KAAK,oBAAoBC,OAAQ,kBAAM,eAACL,GAAD,OAC9C,eAAC,KAAD,CAAOM,OAAK,EAACF,KAAK,WAAWC,OAAQ,kBAAM,eAACN,GAAD,UAE/C,eAAC,KAAD,CAAOK,KAAK,SAASC,OAAQ,kBAAM,eAAC,GAAD,OACnC,eAAC,KAAD,CAAOD,KAAK,QAAQlB,UAAWvE,KAC/B,eAAC,KAAD,CAAOyF,KAAK,SAASlB,UAAWxE,KAChC,eAAC,KAAD,CAAO0F,KAAK,SAASlB,UAAWqB,WAhBjC,eAAC9C,GAAA,EAAD,Q,GAPDC,aAsCH7D,eACX2G,KACA7C,cAVoB,SAAElI,GACtB,MAAO,CACHwC,OAAQxC,EAAM6D,KAAKrB,OACnBD,MAAOvC,EAAM6D,KAAKtB,MAClBc,YAAarD,EAAM8D,IAAIT,eAMmE,CAAEoH,cdzCvE,kBAAiB,SAAC7H,GACvC,IAAMoI,EAAWpI,EAASD,KAE1BsI,QAAQC,IAAI,CAACF,IACR/J,MAAK,WACF2B,EAASjD,YckCVyE,CAGboG,IClEFW,IAASP,OAML,eAAC,KAAD,UACI,eAAC,KAAD,CAAUvG,MAAOA,EAAjB,SACI,eAAC,GAAD,QAGR+G,SAASC,eAAe,U,mBCjB5BlL,EAAOC,QAAU,CAAC,YAAc,mCAAmC,MAAQ,6BAA6B,iBAAmB,0C,yCCD5G,MAA0B,sC,OCW1B4H,IARG,WACd,OACI,8BACI,qBAAKpB,IAAK0E,EAAWtE,IAAI,kB,mBCLrC7G,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,2BAA2B,IAAM,sB,8ICO1FmL,EAA4D,SAACzD,GAE/D,IAAM0D,EAAW1D,EAAM2D,KAAKpC,OAASvB,EAAM2D,KAAKC,QAEhD,OACI,sBAAKhH,UAAS,UAAK+D,IAAEkD,YAAP,YAAsBH,EAAW/C,IAAEY,MAAQ,IAAzD,UACI,8BACKvB,EAAM8D,WAEVJ,GAAY,+BAAO1D,EAAM2D,KAAKpC,YAS9BwC,EAAiD,SAAC/D,GAE3D,IAAQgE,EAA2BhE,EAA3BgE,MAAaC,GAAcjE,EAApB2D,KAAoB3D,EAAdiE,WAErB,OACI,cAACR,EAAD,2BAAiBzD,GAAjB,aACI,gEAAcgE,GAAWhE,GAAWiE,QAKnCrC,EAA8C,SAAC5B,GAExD,IAAQgE,EAA2BhE,EAA3BgE,MAAaC,GAAcjE,EAApB2D,KAAoB3D,EAAdiE,WAErB,OACI,cAACR,EAAD,2BAAiBzD,GAAjB,aACI,6DAAWgE,GAAWhE,GAAWiE,S,gCCzC7C,oEAAO,IAAMnC,EAA+B,SAAEZ,GAC1C,IAAIA,EAIJ,MAAO,qBAGEgD,EAAmB,SAAEC,GAC9B,OAAO,SAAEjD,GACL,GAAIA,EAAMe,OAASkC,EACf,MAAM,iBAAN,OAAwBA,EAAxB,e,mBCZZ9L,EAAOC,QAAU,CAAC,UAAY,6BAA6B,KAAO,wBAAwB,aAAe,kC,+BCDzG,wEAWY2C,EAXZ,SAGahC,EAHb,OAGwBmL,EAAMC,OAAO,CACjCC,QAAQ,gDACRC,iBAAiB,EACjBC,QAAS,CACL,UAAW,2C,SAIPvJ,O,qBAAAA,I,iBAAAA,I,2CAAAA,M,8TCJCwJ,EAAa,SACXnL,GACP,OAAOL,IACFC,IADE,kBAC0BI,IAC5BH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAJhBoL,EAAa,SAMZnL,GACN,OAAOL,IACFC,IADE,yBAC4BI,IAC9BH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAThBoL,EAAa,SAWTpF,GACT,OAAOpG,IACFyL,IAAqB,kBAAmB,CAAErF,OAAQA,IAClDlG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAdhBoL,EAAa,SAgBZE,GACN,IAAMvC,EAAW,IAAIwC,SAErB,OADAxC,EAASyC,OAAO,SAAUF,GACnB1L,IACFyL,IAAgD,iBAAkBtC,EAAU,CACzEoC,QAAS,CACL,eAAgB,yBAGvBrL,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAzBhBoL,EAAa,SA2BVK,GACR,OAAO7L,IACFyL,IAAqB,WAAYI,GACjC3L,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SC/BvB0L,EAAW,sBACXC,EAAmB,8BACnBC,EAAa,wBACbC,EAAc,yBACdC,EAAqB,gCAErB5N,EAAe,CACjB6N,MAAO,CACH,CAAC3N,GAAI,EAAGC,QAAS,2HAA6B2N,UAAW,GACzD,CAAC5N,GAAI,EAAGC,QAAS,sIAA8B2N,UAAW,KAC9DP,QAAS,KACTzF,OAAQ,GACRiG,YAAa,IA0CJzN,EAAU,CACnB0N,qBAAsB,SAAED,GAAF,MAA2B,CAAEtN,KAAM+M,EAAUO,gBACnEE,eAAgB,SAAEV,GAAF,MAA6B,CAAE9M,KAAMgN,EAAkBF,YACvEW,UAAW,SAAEpG,GAAF,MAAuB,CAAErH,KAAMiN,EAAY5F,WACtDqG,WAAY,SAAEC,GAAF,MAAuB,CAAE3N,KAAMkN,EAAaS,WACxDC,iBAAkB,SAAE7G,GAAF,MAA2B,CAAE/G,KAAMmN,EAAoBpG,YAGhE8G,EAAiB,SAAEvM,GAAF,8CAAwC,WAAOwB,GAAP,eAAAC,EAAA,sEAC/C0J,EAAsBnL,GADyB,OAC5DD,EAD4D,OAElEyB,EAASjD,EAAQ2N,eAAenM,IAFkC,2CAAxC,uDAKjByM,EAAY,SAAExM,GAAF,8CAAiC,WAAOwB,GAAP,eAAAC,EAAA,sEACnC0J,EAAqBnL,GADc,OAChDD,EADgD,OAEtDyB,EAASjD,EAAQ4N,UAAUpM,IAF2B,2CAAjC,uDAKZ0M,EAAe,SAAE1G,GAAF,8CAAiC,WAAOvE,GAAP,SAAAC,EAAA,sEACtC0J,EAAwBpF,GADc,cAEhDrE,aAAeC,IAAgBC,SACpCJ,EAASjD,EAAQ4N,UAAUpG,IAH0B,2CAAjC,uDAOf2G,EAAY,SAAEC,GAAF,8CAA6B,WAAOnL,GAAP,eAAAC,EAAA,sEAC/B0J,EAAqBwB,GADU,QAC5C5M,EAD4C,QAEzC2B,aAAeC,IAAgBC,SACpCJ,EAASjD,EAAQ+N,iBAAiBvM,EAAKA,KAAK0F,SAHE,2CAA7B,uDAOZmH,EAAc,SAAEpB,GAAF,8CAAuC,WAAOhK,EAAUuF,GAAjB,2BAAAtF,EAAA,6DACxDzB,EAAU+G,IAAWtE,KAAKzC,OAD8B,SAE3CmL,EAAuBK,GAFoB,WAExDzL,EAFwD,QAGrD2B,aAAeC,IAAgBC,QAHsB,oBAI5C,MAAV5B,EAJsD,iCAKhDwB,EAAS+K,EAAevM,IALwB,qCAQhD,IAAI6M,MAAM,wBARsC,gCAYpD3O,EAAW6B,EAAK7B,SAZoC,cAapCA,GAboC,IAa1D,2BAAWE,EAAqB,QACtB0O,EAAoB1O,EACrB2O,MAAM,GAAG,GACTC,cACAC,MAAM,KAAK,GACXA,MAAM,MAAM,GAEjBzL,EAASoH,YAAW,eAAgB,CAChC,SAAW,eAAIkE,EAAoB1O,EAAQ4O,cAAcE,SAASJ,IAAsB1O,MArBtC,uDAwBnDyL,QAAQsD,OAAO,WAxBoC,4CAAvC,yDA4BZ7K,IAhGQ,WAAoE,IAAlE1D,EAAiE,uDAAzDX,EAAcY,EAA2C,uCACtF,OAAQA,EAAOH,MACX,KAAK+M,EACD,IAAM2B,EAAU,CAAEjP,GAAI,EAAGC,QAASS,EAAOmN,YAAaD,UAAW,GACjE,OAAO,2BACAnN,GADP,IAEIkN,MAAM,GAAD,mBAAMlN,EAAMkN,OAAZ,CAAmBsB,IACxBpB,YAAa,KAErB,KAAKN,EACD,OAAO,2BACA9M,GADP,IAEI4M,QAAS3M,EAAO2M,UAExB,KAAKG,EACD,OAAO,2BACA/M,GADP,IAEImH,OAAQlH,EAAOkH,SAEvB,KAAK6F,EACD,OAAO,2BACAhN,GADP,IAEIkN,MAAOlN,EAAMkN,MAAMpL,QAAO,SAAAuE,GAAC,OAAIA,EAAE9G,KAAOU,EAAOwN,YAEvD,KAAKR,EACD,OAAO,2BACAjN,GADP,IAEI4M,QAAQ,2BAAK5M,EAAM4M,SAAZ,IAAqB/F,OAAQ5G,EAAO4G,WAEnD,QACI,OAAO7G,M","file":"static/js/main.5e911288.chunk.js","sourcesContent":["import {InferActionsTypes} from \"./redux-store\";\r\nimport {DialogType, MessageType} from \"../types/types\";\r\n\r\nconst SEND_MESSAGE = 'SN/DIALOGS/SEND-MESSAGE';\r\n\r\nconst initialState = {\r\n    messages: [{id: 1, message: \"Hi how are you?\"}, {id: 2, message: \"What did you do yesterday?\"}, {id: 3, message: \"Yes, sure\"}] as Array<MessageType>,\r\n    dialogs: [{id: 1, name: \"Dima\"}, {id: 2, name: \"Sveta\"}, {id: 3, name: \"Vika\"}, {id: 4, name: \"Masha\"}] as Array<DialogType>\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nconst dialogsReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            const newMessage = { id: 4, message: action.newMessageBody };\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, newMessage]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    sendMessage: (newMessageBody: string ) => ({ type: SEND_MESSAGE, newMessageBody } as const)\r\n}\r\n\r\nexport default dialogsReducer;\r\n","export default __webpack_public_path__ + \"static/media/user.43e64566.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__3Tunq\",\"selectedPage\":\"Users_selectedPage__1dWid\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__25szF\",\"item\":\"Navbar_item__DmRP0\",\"active\":\"Navbar_active__1Vami\"};","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n    return items.map((u: any) => {   // нужно сделать копию ТОЛЬКО того объекта(юзера) который меняем\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps};\r\n        }\r\n        return u;\r\n    })\r\n}","import {GetItemsType, instance, APIResponseType} from \"./api\";\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return instance\r\n            .get<GetItemsType>(`users/?page=${currentPage}&count=${pageSize}`)\r\n            .then(res => res.data);\r\n    },\r\n    follow(userId: number) {\r\n        return instance\r\n            .post<APIResponseType>(`follow/${userId}`)\r\n            .then(res => res.data);\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance\r\n            .delete<APIResponseType>(`follow/${userId}`)\r\n            .then(res => res.data);\r\n    }\r\n};","import {updateObjectInArray} from \"../utils/object-helpers\";\r\nimport {UserType} from \"../types/types\";\r\nimport {Dispatch} from \"redux\";\r\nimport {AppStateType, BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\nimport {usersAPI} from \"../api/users-api\";\r\nimport {ResultCodesEnum} from \"../api/api\";\r\n\r\n// const FOLLOW = 'users/FOLLOW';\r\n// const UNFOLLOW = 'users/UNFOLLOW';\r\n// const SET_USERS = 'users/SET_USERS';\r\n// const SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE';\r\n// const SET_TOTAL_USERS_COUNT = 'users/SET_TOTAL_USERS_COUNT';\r\n// const TOGGLE_IS_FETCHING = 'users/TOGGLE_IS_FETCHING';\r\n// const TOGGLE_IS_FOLLOWING_PROGRESS = 'users/TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\n// С TS МОЖНО БЕЗ СДЕЛАТЬ БЕЗ КОНСТАНТ-ЭКСШЕНОВ\r\n\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<number>  // когда идет подписка, сюда добавлять id пользователя\r\n}\r\n\r\nexport type InitialStateType = typeof initialState; // экспорт для теста редюсера\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n\r\nconst usersReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n            };\r\n        case 'UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n            };\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users    // ...спред action.users, т.к. action.users-массив, склеиваем 2 массива в 1\r\n            };\r\n        case 'SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            };\r\n        case 'SET_TOTAL_USERS_COUNT':\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.count\r\n            };\r\n        case 'TOGGLE_IS_FETCHING':\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            };\r\n        case 'TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    followSuccess: ( userId: number ) => ({ type: 'FOLLOW', userId } as const),\r\n    unfollowSuccess: ( userId: number ) => ({ type: 'UNFOLLOW', userId } as const),\r\n    setUsers: ( users: Array<UserType> ) => ({ type: 'SET_USERS', users } as const),\r\n    setCurrentPage: ( currentPage: number ) => ({ type: 'SET_CURRENT_PAGE', currentPage } as const),\r\n    setTotalUsersCount: ( totalUsersCount: number ) => ({ type: 'SET_TOTAL_USERS_COUNT', count: totalUsersCount } as const),\r\n    toggleIsFetching: ( isFetching: boolean ) => ({ type: 'TOGGLE_IS_FETCHING', isFetching } as const),\r\n    toggleFollowingInProgress: ( isFetching: boolean, userId: number ) => ({ type: 'TOGGLE_IS_FOLLOWING_PROGRESS', isFetching, userId } as const)\r\n}\r\n\r\nexport const requestUsers = ( page: number, pageSize: number ) => async (dispatch: Dispatch<ActionsType>, getState: () => AppStateType) => {\r\n    dispatch(actions.toggleIsFetching(true));\r\n    dispatch(actions.setCurrentPage(page));\r\n\r\n    const response = await usersAPI.getUsers(page, pageSize);\r\n    dispatch(actions.toggleIsFetching(false));\r\n    dispatch(actions.setUsers(response.items));\r\n    dispatch(actions.setTotalUsersCount(response.totalCount));\r\n}\r\n\r\nexport const follow = ( userId: number ): ThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleFollowingInProgress(true, userId));\r\n\r\n    try {\r\n        const data = await usersAPI.follow(userId);\r\n        if (data.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(actions.followSuccess(userId));\r\n        }\r\n        dispatch(actions.toggleFollowingInProgress(false, userId));\r\n    }\r\n    catch (e) {\r\n        alert('error')\r\n    }\r\n}\r\n\r\nexport const unfollow = ( userId: number ): ThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleFollowingInProgress(true, userId));\r\n\r\n    const data = await usersAPI.unfollow(userId);\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actions.unfollowSuccess(userId));\r\n    }\r\n    dispatch(actions.toggleFollowingInProgress(false, userId));\r\n}\r\n\r\nexport default usersReducer;\r\n","import {instance, APIResponseType} from \"./api\";\r\n\r\ntype MeResponseDataType = {\r\n    id: number\r\n    email: string\r\n    login: string\r\n}\r\n\r\ntype LoginResponseDataType = {\r\n    userId: number\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance\r\n            .get<APIResponseType<MeResponseDataType>>('auth/me')\r\n            .then(res => res.data);\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance\r\n            .post<APIResponseType<LoginResponseDataType>>('auth/login', { email, password, rememberMe, captcha })\r\n            .then(res => res.data);\r\n    },\r\n    logout() {\r\n        return instance\r\n            .delete<APIResponseType>('auth/login')\r\n            .then(res => res.data);\r\n    }\r\n};","import {instance} from \"./api\";\r\n\r\ntype GetCaptchaUrlResponseType = {\r\n    url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance\r\n            .get<GetCaptchaUrlResponseType>('security/get-captcha-url')\r\n            .then(res => res.data);\r\n    }\r\n};","import {ResultCodesEnum} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {InferActionsTypes, BaseThunkType} from \"./redux-store\";\r\nimport {authAPI} from \"../api/auth-api\";\r\nimport {securityAPI} from \"../api/security-api\";\r\n\r\nconst SET_USER_DATA = 'SN/AUTH/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'SN/AUTH/GET_CAPTCHA_URL_SUCCESS';\r\n\r\nconst initialState = {\r\n    userId: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n\r\nconst authReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                captchaUrl: action.captchaUrl\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean ) =>\r\n        ({ type: SET_USER_DATA, payload: { userId, email, login, isAuth }} as const),\r\n    getCaptchaUrlSuccess: (captchaUrl: string) => ({ type: GET_CAPTCHA_URL_SUCCESS, captchaUrl } as const)\r\n}\r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    const data = await authAPI.me();\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        const { id, email, login } = data.data;\r\n        dispatch(actions.setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\n\r\nexport const login = ( email: string, password: string, rememberMe: boolean, captcha: any ): ThunkType => async (dispatch) => {\r\n    const data = await authAPI.login(email, password, rememberMe, captcha);\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        await dispatch(getAuthUserData());\r\n    }\r\n    else {\r\n        if (data.resultCode === ResultCodesEnum.CaptchaIsRequired) {   // captcha\r\n            await dispatch(getCaptchaUrl());\r\n        }\r\n        const message = data.messages.length ? data.messages[0] : 'Some error';\r\n        // @ts-ignore\r\n        dispatch(stopSubmit('login', { _error: message }));  // 1)название формы 2)проблемные поля и текст ошибки(_error - общая. Можно по имени Field)\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    const data = await authAPI.logout();\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const data = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = data.url;\r\n    dispatch(actions.getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport default authReducer;","import {getAuthUserData} from \"./auth-reducer\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";    // это actionCreator\r\n\r\nconst SET_INITIALIZED_SUCCESS = 'SN/APP/SET-INITIALIZED-SUCCESS';\r\n\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n\r\nconst appReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    initializedSuccess: () => ({ type: SET_INITIALIZED_SUCCESS } as const)\r\n}\r\n\r\n// @ts-ignore\r\nexport const initializeApp = (): ThunkType => (dispatch) => {\r\n        const promise1 = dispatch(getAuthUserData());\r\n        //dispatch(something)\r\n        Promise.all([promise1])\r\n            .then(() => {\r\n                dispatch(actions.initializedSuccess());\r\n            })\r\n}\r\n\r\nexport default appReducer;\r\n","import {Action, applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport thunkMiddleware, {ThunkAction} from \"redux-thunk\";  // своё название любое\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport authReducer from \"./auth-reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    form: formReducer   // Обязательно должно быть именно form\r\n})\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\nexport type InferActionsTypes<T> = T extends {[key: string]: (...args: any[]) => infer U} ? U : never;\r\n\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>;    // A должен быть Action, R returned value\r\n\r\n// let state: AppStateType;\r\n// state.dialogsPage   Можем теперь достать часть стейта используя ts\r\n\r\n// redux devtools installed\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport c from \"./Navbar.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={c.nav}>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/profile\" activeClassName={c.active}>Profile</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/dialogs\" activeClassName={c.active}>Messages</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/users\" activeClassName={c.active}>Users</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/news\" activeClassName={c.active}>News</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/music\" activeClassName={c.active}>Music</NavLink>\r\n            </div>\r\n            <div className={c.item}>\r\n                <NavLink to=\"/settings\" activeClassName={c.active}>Settings</NavLink>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\n// import c from \"./Music.module.css\";\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>music</div>\r\n    )\r\n}\r\n\r\nexport default Music;\r\n","import React, {FC} from \"react\";\r\n// import c from \"./News.module.css\";\r\n\r\nconst News: FC = () => {\r\n    return (\r\n        <div>news</div>\r\n    )\r\n}\r\n\r\nexport default News;\r\n","import React, {FC, useState} from \"react\";\r\nimport c from \"./Paginator.module.css\";\r\n\r\ntype Props = {\r\n    totalItemsCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    portionSize?: number\r\n}\r\n\r\nconst Paginator: FC<Props> = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);   // При totalUsersCount 19 и pageSize 5 не теряются последние пользователи\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const [portionNumber, setPortionNumber] = useState(1);// в локальном, т.к. это чисто ui-момент\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={c.paginator}>\r\n            {portionNumber > 1 &&\r\n            <button onClick={() => setPortionNumber(portionNumber - 1)}>\r\n                PREV\r\n            </button>}\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                .map(p => <span className={`${c.page} ${currentPage === p && c.selectedPage}`} onClick={() => onPageChanged(p)}>{p}</span>)}\r\n            {portionCount > portionNumber &&\r\n            <button onClick={() => setPortionNumber(portionNumber + 1)}>\r\n                NEXT\r\n            </button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Paginator;\r\n","import c from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/images/user.png\";\r\nimport React, {FC} from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {UsersProps} from \"./Users\";\r\nimport {UserType} from \"../../types/types\";\r\n\r\ntype UserTypeLocal = Pick<UsersProps, 'follow' | 'unfollow' | 'followingInProgress'> & { user: UserType };\r\n\r\nconst User: FC<UserTypeLocal> = ({user, followingInProgress, follow, unfollow}) => {\r\n    return (\r\n        <div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={`/profile/${user.id}`}>\r\n                        <img src={user.photos.small ? user.photos.small : userPhoto} alt=\"\"\r\n                             className={c.userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {user.followed\r\n                        ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  onClick={() => unfollow(user.id)}>\r\n                            Unfollow\r\n                        </button>\r\n                        : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  onClick={() => follow(user.id)}>\r\n                            Follow\r\n                        </button>\r\n                    }\r\n                </div>\r\n            </span>\r\n            <span>\r\n                <span>\r\n                    <div>{user.name}</div>\r\n                    <div>{user.status}</div>\r\n                </span>\r\n                <span>\r\n                    <div>{\"user.location.country\"}</div>\r\n                    <div>{\"user.location.city\"}</div>\r\n                </span>\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;\r\n","import React, {FC} from \"react\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\nimport {UserType} from \"../../types/types\";\r\n\r\nexport type UsersProps = {\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n\r\n    onPageChanged: (pageNumber: number) => void\r\n    users: Array<UserType>\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nconst Users: FC<UsersProps> = ({totalUsersCount, pageSize, currentPage, onPageChanged, users, follow, unfollow, followingInProgress}) => {\r\n    return (\r\n        <div>\r\n            <Paginator\r\n                currentPage={currentPage}\r\n                onPageChanged={onPageChanged}\r\n                totalItemsCount={totalUsersCount}\r\n                pageSize={pageSize}\r\n            />\r\n            {users.map(u => <User user={u} key={u.id} followingInProgress={followingInProgress} follow={follow}\r\n                                  unfollow={unfollow}/>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;\r\n","// Простые селекторы оставляем, сложные прогоняем через reselect\r\nimport {createSelector} from \"reselect\";\r\nimport {AppStateType} from \"../redux-store\";\r\n\r\nexport const getUsersSelector = ( state: AppStateType ) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector,\r\n    (users) => {    /* колбеку, чтобы сделать логику выборки, нужно получить из чего эта выборка будет происходить\r\n    но как createSelector поймёт каких именно пользователей засунуть. прежде чем перезапускаать этот колбек reselect посмотрит не изменились ли\r\n    зависимости и перезапустит её только если вернётся новый результат */\r\n    return users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = ( state: AppStateType ) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = ( state: AppStateType ) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = ( state: AppStateType ) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = ( state: AppStateType ) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = ( state: AppStateType ) => {\r\n    return state.usersPage.followingInProgress;\r\n}\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    requestUsers,\r\n    follow,\r\n    unfollow\r\n} from \"../../redux/users-reducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport { compose } from \"redux\";\r\nimport {\r\n    getUsers,\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount\r\n} from \"../../redux/selectors/users-selectors\";\r\nimport {UserType} from \"../../types/types\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n    currentPage: number\r\n    pageSize: number\r\n    isFetching: boolean\r\n    totalUsersCount: number\r\n    users: Array<UserType>\r\n    followingInProgress: Array<number>\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    getUsers: (pageNumber: number, pageSize: number) => void\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n    // пропсы, которые передали через атрибуты в теге\r\n}\r\n\r\ntype P = MapStatePropsType & MapDispatchPropsType & OwnPropsType;\r\n\r\nclass UsersContainer extends Component<P> {\r\n\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n\r\n    onPageChanged = ( pageNumber: number ) => {\r\n        this.props.getUsers(pageNumber, this.props.pageSize);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            users,\r\n            totalUsersCount,\r\n            pageSize,\r\n            currentPage,\r\n            isFetching,\r\n            followingInProgress,\r\n            follow,\r\n            unfollow\r\n        } = this.props;\r\n\r\n        return (\r\n            <>\r\n                {isFetching ? <Preloader /> : null}\r\n\r\n                <Users\r\n                    totalUsersCount={totalUsersCount}\r\n                    pageSize={pageSize}\r\n                    currentPage={currentPage}\r\n                    users={users}\r\n                    onPageChanged={this.onPageChanged}\r\n                    isFetching={isFetching}\r\n                    followingInProgress={followingInProgress}\r\n                    follow={follow}\r\n                    unfollow={unfollow}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n// const mapStateToProps = state => {  // Здесь сидит весь стейт приложения\r\n//     return {\r\n//         users: state.usersPage.users,\r\n//         pageSize: state.usersPage.pageSize,\r\n//         totalUsersCount: state.usersPage.totalUsersCount,\r\n//         currentPage: state.usersPage.currentPage,\r\n//         isFetching: state.usersPage.isFetching,\r\n//         followingInProgress: state.usersPage.followingInProgress\r\n//     }\r\n// }\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {  // Здесь сидит весь стейт приложения\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n// const mapDispatchToProps = dispatch => {\r\n//     return {\r\n//         follow: userId => {   //  колбек, т.к. презентационная компонента вызовет только по необходимости\r\n//             dispatch(followAC(userId))  // диспатчим результат работы actionCreator\r\n//         },\r\n//         unfollow: userId => {\r\n//             dispatch(unFollowAC(userId))\r\n//         },\r\n//         setUsers: users => {\r\n//             dispatch(setUsersAC(users))\r\n//         },\r\n//         setCurrentPage: pageNumber => {\r\n//             dispatch(setCurrentPageAC(pageNumber))\r\n//         },\r\n//         setTotalUsersCount: totalCount => {\r\n//             dispatch(setUsersTotalCountAC(totalCount))\r\n//         },\r\n//         toggleIsFetching: IsFetching => {\r\n//             dispatch(toggleIsFetchingAC(IsFetching))\r\n//         },\r\n//     }\r\n// }\r\n\r\n// follow: follow\r\n// в пропсы придёт не сам action creator, connect создаст колбэк, который внутри задиспатчит return action creator\r\n// export default connect(mapStateToProps, {\r\n//     setCurrentPage,\r\n//     getUsers,\r\n//     follow,\r\n//     unfollow\r\n// })(UsersContainer);\r\n\r\nexport default compose(\r\n    // WithAuthRedirect, теперь можно зайти на пользователей не авторизованному\r\n    // TStateProps, TDispatchProps, TOwnProps, DefaultRootState\r\n    connect<MapStatePropsType, MapDispatchPropsType, OwnPropsType, AppStateType>(mapStateToProps, {\r\n    getUsers: requestUsers,\r\n    follow,\r\n    unfollow\r\n})\r\n)(UsersContainer);\r\n","import React, {FC} from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport logo from \"../../logo.jpg\";\r\nimport s from \"./Header.module.css\";\r\n\r\ntype P = {\r\n    isAuth: boolean\r\n    login: string | null\r\n    logout: () => void\r\n}\r\n\r\nconst Header: FC<P> = ({isAuth, login, logout}) => {\r\n    return (\r\n        <header className={s.header}>\r\n            <img src={logo} alt=\"logo\" />\r\n            <div className={s.loginBlock}>\r\n                {isAuth\r\n                    ? <div style={{display: 'flex', alignItems: 'center'}}>\r\n                        {login}\r\n                        <input type=\"button\" className={s.btn} onClick={logout} value=\"Log out\" />\r\n                      </div>\r\n                    : <NavLink to={'/login'} className={s.btn}>\r\n                        Login\r\n                      </NavLink>\r\n                }\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","export default \"data:image/jpeg;base64,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\"","import React, { Component } from \"react\";\r\nimport Header from \"./Header\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../../redux/auth-reducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    logout: () => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n    // пропсы, которые передали через атрибуты передали в теге\r\n}\r\n\r\ntype P = MapStatePropsType & MapDispatchPropsType & OwnPropsType;\r\n\r\nclass HeaderContainer extends Component<P> {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login\r\n    }\r\n}\r\n\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, OwnPropsType, AppStateType>( mapStateToProps, { logout } )(HeaderContainer);\r\n","import React, {FC} from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport { Input } from \"../common/FormsControls/FormsControls\";\r\nimport { required } from \"../../utils/validators/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { login } from \"../../redux/auth-reducer\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport s from \"../common/FormsControls/FormsControls.module.css\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\nconst LoginForm: FC<InjectedFormProps<LoginFormValuesType & LoginFormOwnPropsType> & LoginFormOwnPropsType> = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>    {/* redux-form событие с e.preventDefault() чтобы страница не перезагружалась */}\r\n            <div>\r\n                <Field name='email' placeholder='Email' component={Input} validate={[required]} />\r\n            </div>\r\n            <div>\r\n                <Field name='password' placeholder='Password' component={Input} validate={[required]} />\r\n            </div>\r\n            <div>\r\n                <Field name='rememberMe' component='input' type='checkbox' /> remember me\r\n            </div>\r\n            {captchaUrl &&\r\n            <>\r\n                <img src={captchaUrl} alt=\"\" />\r\n                <Field name='captcha' placeholder='input captcha...' component={Input} validate={[required]} />\r\n            </>}\r\n            {error &&\r\n            <div className={s.formSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnPropsType>({form: 'login'})(LoginForm);\r\n\r\ntype LoginFormOwnPropsType = {\r\n    captchaUrl?: string | null\r\n}\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\n\r\ntype CommonType = LoginFormOwnPropsType & MapStatePropsType & MapDispatchPropsType;\r\n\r\n// Данные, собираемые формой\r\ntype LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\n\r\nconst Login: FC<CommonType> = ({login, isAuth, captchaUrl}) => {\r\n\r\n    const onSubmit = ( formData: LoginFormValuesType ) => {\r\n        login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'} />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Логин</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ( state: AppStateType ): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { login })(Login);\r\n","import React, {Component} from \"react\";\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport {Route, withRouter} from \"react-router-dom\";\r\nimport Music from \"./components/Music/Music\";\r\nimport News from \"./components/News/News\";\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport LoginPage from \"./components/Login/Login\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\n\r\nimport \"./App.css\";\r\nimport {AppStateType} from \"./redux/redux-store\";\r\n\r\nconst Suspense = (React as any).Suspense;\r\nconst lazy = (React as any).lazy;\r\n// в bundle не попадёт, а загрузится по мере необходимости\r\nconst DialogsContainer = lazy( () => import('./components/Dialogs/DialogsContainer'));\r\nconst ProfileContainer = lazy( () => import('./components/Profile/ProfileContainer'));\r\n\r\ntype MapStatePropsType = ReturnType<typeof mapStateToProps>;\r\n\r\ntype MapDispatchPropsType = {\r\n    initializeApp: () => void\r\n}\r\n\r\ntype OwnPropsType = {\r\n\r\n}\r\n\r\nclass App extends Component<MapStatePropsType & MapDispatchPropsType> {\r\n    componentDidMount() {\r\n        this.props.initializeApp();\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.initialized) {\r\n            return <Preloader />\r\n        }\r\n\r\n        return (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer />\r\n                <Navbar />\r\n                <div className='app-wrapper-content'>\r\n                    <Suspense fallback={<Preloader />}>\r\n                        {/*теперь /profile без парамаетра не открывается, указываем что он не обязателен*/}\r\n                        <Route path='/profile/:userId?' render={() => <ProfileContainer />}/>\r\n                        <Route exact path='/dialogs' render={() => <DialogsContainer />}/>\r\n                    </Suspense>\r\n                    <Route path='/users' render={() => <UsersContainer />}/>\r\n                    <Route path='/news' component={News}/>\r\n                    <Route path='/music' component={Music}/>\r\n                    <Route path='/login' component={LoginPage}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ( state: AppStateType ) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n        initialized: state.app.initialized\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect<MapStatePropsType, MapDispatchPropsType, OwnPropsType, AppStateType>(mapStateToProps, { initializeApp })\r\n)(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport store from './redux/redux-store';\r\nimport App from \"./App\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nReactDOM.render(\r\n    // Разные люди хотят видеть здесь иные значения, поэтому нельзя 'https://alexandr1111.github.io/social-network',\r\n    // не будет работать на localhost\r\n    // hashRouter - работает на якорях как раньше, решает проблему с 404 при обновлении страницы после\r\n    // https://alexandr1111.github.io/social-network/profile(или другие адреса) если не писать basename\r\n    //basename={process.env.PUBLIC_URL}\r\n    <Router>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </Router>,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n// с введением connect подписка не нужна, он сам субскрайбится\r\n// store.subscribe(() => { // Когда стейт изменится, стор вызовет нашу стрелочную функцию, чтобы запросит заново стейт\r\n//     rerenderEntireTree();\r\n// })\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__E9CiO\",\"error\":\"FormsControls_error__2cgCt\",\"formSummaryError\":\"FormsControls_formSummaryError__gtRpS\"};","export default __webpack_public_path__ + \"static/media/preloader.30e900c6.gif\";","import React from \"react\";\r\nimport preloader from \"../../../assets/images/preloader.gif\";\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div>\r\n            <img src={preloader} alt=\"preloader\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1MZ7r\",\"loginBlock\":\"Header_loginBlock__3BN1t\",\"btn\":\"Header_btn__1enWH\"};","import React, {FC} from 'react';\r\nimport s from './FormsControls.module.css';\r\nimport {WrappedFieldProps} from \"redux-form\";\r\n\r\ntype FormControlPropsType = {\r\n    children: React.ReactNode\r\n}\r\n\r\nconst FormControl: FC<FormControlPropsType & WrappedFieldProps> = (props: WrappedFieldProps & FormControlPropsType ) => {\r\n\r\n    const hasError = props.meta.error && props.meta.touched;\r\n\r\n    return (\r\n        <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n            <div>\r\n                {props.children}\r\n            </div>\r\n            {hasError && <span>{props.meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\ntype TextareaType = {\r\n    restProps: string\r\n}\r\n\r\nexport const Textarea: FC<TextareaType & WrappedFieldProps> = (props) => {\r\n\r\n    const { input, meta, restProps } = props;\r\n\r\n    return (\r\n        <FormControl {...props}>\r\n            <textarea {...input} {...props} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport const Input: FC<TextareaType & WrappedFieldProps> = (props) => {\r\n\r\n    const { input, meta, restProps } = props;\r\n\r\n    return (\r\n        <FormControl {...props}>\r\n            <input {...input} {...props} {...restProps} />\r\n        </FormControl>\r\n    )\r\n}\r\n\r\n// export const Textarea = ({input, meta, ...props}) => {\r\n//\r\n//     const hasError = meta.error && meta.touched;\r\n//\r\n//     return (\r\n//         <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n//             <div>\r\n//                 <textarea {...input} {...props} />\r\n//             </div>\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n\r\n// export const Input = ({input, meta, ...props}) => {\r\n//\r\n//     const hasError = meta.error && meta.touched;\r\n//\r\n//     return (\r\n//         <div className={`${s.formControl} ${hasError ? s.error : \"\"}`}>\r\n//             <div>\r\n//                 <input {...input} {...props} />\r\n//             </div>\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n","export type FieldValidatorType = ( value: string ) => string | undefined\r\n\r\nexport const required: FieldValidatorType = ( value ) => {\r\n    if (value) {\r\n        return undefined;\r\n    }\r\n\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = ( maxLength: number ): FieldValidatorType => {\r\n    return ( value ) => {\r\n        if (value.length > maxLength) {\r\n            return `Max length is ${maxLength} symbols`;\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__3lYu0\",\"page\":\"Paginator_page__3bLuB\",\"selectedPage\":\"Paginator_selectedPage__LaTfF\"};","import axios from \"axios\";\r\nimport {UserType} from \"../types/types\";\r\n\r\nexport const instance = axios.create({\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"97f1d028-7518-43ef-85bd-dd2bcb1ec8e1\"\r\n    }\r\n})\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1,\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\nexport type GetItemsType = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport type APIResponseType<D = {}, RC = ResultCodesEnum> = {    // надо уточнить, как Array<массив чего>\r\n    data: D\r\n    resultCode: RC\r\n    messages: Array<string>\r\n}","import {instance, APIResponseType} from \"./api\";\r\nimport {PhotosType, ProfileType} from \"../types/types\";\r\n\r\ntype SavePhotoResponseDataType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance\r\n            .get<ProfileType>(`profile/${userId}`)\r\n            .then(res => res.data);\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance\r\n            .get<string>(`profile/status/${userId}`)\r\n            .then(res => res.data);\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance\r\n            .put<APIResponseType>('profile/status/', { status: status })\r\n            .then(res => res.data);\r\n    },\r\n    savePhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append('image ', photoFile);\r\n        return instance\r\n            .put<APIResponseType<SavePhotoResponseDataType>>('profile/photo/', formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n            })\r\n            .then(res => res.data);\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance\r\n            .put<APIResponseType>('profile/', profile)\r\n            .then(res => res.data);\r\n    }\r\n};","import {stopSubmit} from \"redux-form\";\r\nimport { PostType, ProfileType, PhotosType } from \"../types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\nimport {profileAPI} from \"../api/prof1le-api\";\r\nimport {ResultCodesEnum} from \"../api/api\";\r\n\r\nconst ADD_POST = 'SN/PROFILE/ADD_POST';\r\nconst SET_USER_PROFILE = 'SN/PROFILE/SET_USER_PROFILE';\r\nconst SET_STATUS = 'SN/PROFILE/SET_STATUS';\r\nconst DELETE_POST = 'SN/PROFILE/DELETE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'SN/PROFILE/SAVE_PHOTO_SUCCESS';\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {id: 1, message: \"Хай, это мой первый пост!\", likeCount: 4},\r\n        {id: 2, message: \"Новая Зеландия, жди меня!♥\", likeCount: 18}] as Array<PostType>,\r\n    profile: null as ProfileType | null,\r\n    status: '' as string,\r\n    newPostText: '' as string\r\n}\r\n\r\ntype InitialStateType = typeof initialState;\r\ntype ThunkType = BaseThunkType<ActionsType>;\r\n\r\nconst profileReducer = ( state = initialState, action: ActionsType ): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost = { id: 5, message: action.newPostText, likeCount: 0 };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: \"\"\r\n            };\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id !== action.postId)\r\n            }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as ProfileType\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    addPostActionCreator: ( newPostText: string) => ({ type: ADD_POST, newPostText } as const),\r\n    setUserProfile: ( profile: ProfileType ) => ({ type: SET_USER_PROFILE, profile } as const),\r\n    setStatus: ( status: string ) => ({ type: SET_STATUS, status } as const),\r\n    deletePost: ( postId: number ) => ({ type: DELETE_POST, postId } as const),\r\n    savePhotoSuccess: ( photos: PhotosType ) => ({ type: SAVE_PHOTO_SUCCESS, photos } as const)\r\n}\r\n\r\nexport const getUserProfile = ( userId: number | null ): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.getProfile(userId);\r\n    dispatch(actions.setUserProfile(data));\r\n}\r\n\r\nexport const getStatus = ( userId: number ): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.getStatus(userId);\r\n    dispatch(actions.setStatus(data));\r\n}\r\n\r\nexport const updateStatus = ( status: string ): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.updateStatus(status);\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actions.setStatus(status));\r\n    }\r\n}\r\n\r\nexport const savePhoto = ( file: File ): ThunkType => async (dispatch) => {\r\n    const data = await profileAPI.savePhoto(file);\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actions.savePhotoSuccess(data.data.photos));\r\n    }\r\n}\r\n\r\nexport const saveProfile = ( profile: ProfileType ): ThunkType => async (dispatch, getState) => {\r\n    const userId =  getState().auth.userId;\r\n    const data = await profileAPI.saveProfile(profile);\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        if (userId != null) {\r\n            await dispatch(getUserProfile(userId));\r\n        }\r\n        else {\r\n            throw new Error('userId can\"t be null')\r\n        }\r\n    }\r\n    else {\r\n        const messages = data.messages;\r\n        for (const message of messages) {\r\n            const socialNetworkName = message\r\n                .slice(0,-1)    // убрали скобку\r\n                .toLowerCase()\r\n                .split(\"(\")[1]  // убрали \"invalid url format\"\r\n                .split(\"->\")[1]    // разделили на [contacts, [network]] и взяли [network]\r\n            // @ts-ignore\r\n            dispatch(stopSubmit('edit-profile', {\r\n                \"contacts\": { [socialNetworkName]: message.toLowerCase().includes(socialNetworkName) && message }\r\n            }));\r\n        }\r\n        return Promise.reject(\"reject\");\r\n    }\r\n}\r\n\r\nexport default profileReducer;\r\n"],"sourceRoot":""}